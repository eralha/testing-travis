function InfoBox(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof t.visible&&(t.visible="undefined"==typeof t.isHidden?!0:!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function ClusterIcon(t,e){t.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function Cluster(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,t.getStyles())}function MarkerClusterer(t,e,i){this.extend(MarkerClusterer,google.maps.OverlayView),e=e||[],i=i||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=i.gridSize||60,this.minClusterSize_=i.minimumClusterSize||2,this.maxZoom_=i.maxZoom||null,this.styles_=i.styles||[],this.title_=i.title||"",this.zoomOnClick_=!0,void 0!==i.zoomOnClick&&(this.zoomOnClick_=i.zoomOnClick),this.averageCenter_=!1,void 0!==i.averageCenter&&(this.averageCenter_=i.averageCenter),this.ignoreHidden_=!1,void 0!==i.ignoreHidden&&(this.ignoreHidden_=i.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==i.enableRetinaIcons&&(this.enableRetinaIcons_=i.enableRetinaIcons),this.imagePath_=i.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=i.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=i.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=i.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=i.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=i.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=i.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}function inherits(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t}function MarkerLabel_(t,e){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(e)}function MarkerWithLabel(t){t=t||{},t.labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,"undefined"==typeof t.labelVisible&&(t.labelVisible=!0),"undefined"==typeof t.raiseOnDrag&&(t.raiseOnDrag=!0),"undefined"==typeof t.clickable&&(t.clickable=!0),"undefined"==typeof t.draggable&&(t.draggable=!1),"undefined"==typeof t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new MarkerLabel_(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var t,e,i,n=this,r=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},o=function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),n.enableEventPropagation_||r(t)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(i=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-i.left-i.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],r));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",o),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},InfoBox.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},InfoBox.prototype.panBox_=function(t){var e,i,n=0,r=0;if(!t&&(e=this.getMap(),e instanceof google.maps.Map)){e.getBounds().contains(this.position_)||e.setCenter(this.position_),i=e.getBounds();var o=e.getDiv(),s=o.offsetWidth,a=o.offsetHeight,l=this.pixelOffset_.width,u=this.pixelOffset_.height,c=this.div_.offsetWidth,h=this.div_.offsetHeight,p=this.infoBoxClearance_.width,d=this.infoBoxClearance_.height,g=this.getProjection().fromLatLngToContainerPixel(this.position_);if(g.x<-l+p?n=g.x+l-p:g.x+c+l+p>s&&(n=g.x+c+l+p-s),this.alignBottom_?g.y<-u+d+h?r=g.y+u-d-h:g.y+u+d>a&&(r=g.y+u+d-a):g.y<-u+d?r=g.y+u-d:g.y+h+u+d>a&&(r=g.y+h+u+d-a),0!==n||0!==r){{e.getCenter()}e.panBy(n,r)}}},InfoBox.prototype.setBoxStyle_=function(){var t,e;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_;for(t in e)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);"undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},i=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=i.ownerDocument.defaultView.getComputedStyle(i,""),t&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0)):document.documentElement.currentStyle&&i.currentStyle&&(e.top=parseInt(i.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(i.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(i.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(i.currentStyle.borderRightWidth,10)||0),e},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.div_.style.visibility=this.isHidden_?"hidden":"visible"},InfoBox.prototype.setOptions=function(t){"undefined"!=typeof t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),"undefined"!=typeof t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),"undefined"!=typeof t.content&&this.setContent(t.content),"undefined"!=typeof t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),"undefined"!=typeof t.maxWidth&&(this.maxWidth_=t.maxWidth),"undefined"!=typeof t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),"undefined"!=typeof t.alignBottom&&(this.alignBottom_=t.alignBottom),"undefined"!=typeof t.position&&this.setPosition(t.position),"undefined"!=typeof t.zIndex&&this.setZIndex(t.zIndex),"undefined"!=typeof t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),"undefined"!=typeof t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),"undefined"!=typeof t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),"undefined"!=typeof t.isHidden&&(this.isHidden_=t.isHidden),"undefined"!=typeof t.visible&&(this.isHidden_=!t.visible),"undefined"!=typeof t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){var t;return t="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(t,e){var i=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",function(){i.setPosition(this.getPosition())})),this.setMap(t),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},ClusterIcon.prototype.onAdd=function(){var t,e,i=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){e=t}),google.maps.event.addDomListener(this.div_,"mousedown",function(){t=!0,e=!1}),google.maps.event.addDomListener(this.div_,"click",function(n){if(t=!1,!e){var r,o,s=i.cluster_.getMarkerClusterer();google.maps.event.trigger(s,"click",i.cluster_),google.maps.event.trigger(s,"clusterclick",i.cluster_),s.getZoomOnClick()&&(o=s.getMaxZoom(),r=i.cluster_.getBounds(),s.getMap().fitBounds(r),setTimeout(function(){s.getMap().fitBounds(r),null!==o&&s.getMap().getZoom()>o&&s.getMap().setZoom(o+1)},100)),n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",i.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var t=i.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",i.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),i=parseInt(e[0].trim(),10),n=parseInt(e[1].trim(),10),r=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(r),t="<img src='"+this.url_+"' style='position: absolute; top: "+n+"px; left: "+i+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*n+"px, "+(-1*i+this.width_)+"px, "+(-1*n+this.height_)+"px, "+-1*i+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",this.div_.title="undefined"==typeof this.sums_.title||""===this.sums_.title?this.cluster_.getMarkerClusterer().getTitle():this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var i=this.styles_[e];this.url_=i.url,this.height_=i.height,this.width_=i.width,this.anchorText_=i.anchorText||[0,0],this.anchorIcon_=i.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=i.textColor||"black",this.textSize_=i.textSize||11,this.textDecoration_=i.textDecoration||"none",this.fontWeight_=i.fontWeight||"bold",this.fontStyle_=i.fontStyle||"normal",this.fontFamily_=i.fontFamily||"Arial,sans-serif",this.backgroundPosition_=i.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(t){this.center_=t},ClusterIcon.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers();for(t=0;t<i.length;t++)e.extend(i[t].getPosition());return e},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(t){var e,i,n;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var r=this.markers_.length+1,o=(this.center_.lat()*(r-1)+t.getPosition().lat())/r,s=(this.center_.lng()*(r-1)+t.getPosition().lng())/r;this.center_=new google.maps.LatLng(o,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),i=this.markers_.length,n=this.markerClusterer_.getMaxZoom(),null!==n&&this.map_.getZoom()>n)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(i===this.minClusterSize_)for(e=0;i>e;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},Cluster.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},Cluster.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)return void this.clusterIcon_.hide();if(t<this.minClusterSize_)return void this.clusterIcon_.hide();var i=this.markerClusterer_.getStyles().length,n=this.markerClusterer_.getCalculator()(this.markers_,i);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(n),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){t.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){t.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),i=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)i.extend(e[t].getPosition());this.getMap().fitBounds(i)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(t){this.gridSize_=t},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(t){this.maxZoom_=t},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(t){this.styles_=t},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(t){this.title_=t},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(t){this.averageCenter_=t},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},MarkerClusterer.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(t){this.imageExtension_=t},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(t){this.imagePath_=t},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(t){this.imageSizes_=t},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(t){this.calculator_=t},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(t){this.clusterClass_=t},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&this.pushMarkerTo_(t[i]);e||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",function(){e.ready_&&(this.isAdded=!1,e.repaint())})}t.isAdded=!1,this.markers_.push(t)},MarkerClusterer.prototype.removeMarker=function(t,e){var i=this.removeMarker_(t);return!e&&i&&this.repaint(),i},MarkerClusterer.prototype.removeMarkers=function(t,e){var i,n,r=!1;for(i=0;i<t.length;i++)n=this.removeMarker_(t[i]),r=r||n;return!e&&r&&this.repaint(),r},MarkerClusterer.prototype.removeMarker_=function(t){var e,i=-1;if(this.markers_.indexOf)i=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){i=e;break}return-1===i?!1:(t.setMap(null),this.markers_.splice(i,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var e;for(e=0;e<t.length;e++)t[e].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(t){var e=this.getProjection(),i=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),n=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),r=e.fromLatLngToDivPixel(i);r.x+=this.gridSize_,r.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(n);o.x-=this.gridSize_,o.y+=this.gridSize_;var s=e.fromDivPixelToLatLng(r),a=e.fromDivPixelToLatLng(o);return t.extend(s),t.extend(a),t},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(t){var e,i;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)i=this.markers_[e],i.isAdded=!1,t&&i.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(t,e){var i=6371,n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,o=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2),s=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),a=i*s;return a},MarkerClusterer.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(t){var e,i,n,r,o=4e4,s=null;for(e=0;e<this.clusters_.length;e++)n=this.clusters_[e],r=n.getCenter(),r&&(i=this.distanceBetweenPoints_(r,t.getPosition()),o>i&&(o=i,s=n));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(n=new Cluster(this),n.addMarker(t),this.clusters_.push(n))},MarkerClusterer.prototype.createClusters_=function(t){var e,i,n,r=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),n=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var o=this.getExtendedBounds(n),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)i=this.markers_[e],!i.isAdded&&this.isMarkerInBounds_(i,o)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);s<this.markers_.length?this.timerRefStatic=setTimeout(function(){r.createClusters_(s)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},MarkerClusterer.CALCULATOR=function(t,e){for(var i=0,n="",r=t.length.toString(),o=r;0!==o;)o=parseInt(o/10,10),i++;return i=Math.min(i,e),{text:r,index:i,title:n}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90],"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(t){var e;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(e=document.createElement("img"),e.style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,MarkerLabel_.getSharedCross.crossDiv=e),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var t,e,i,n,r,o,s,a=this,l=!1,u=!1,c=20,h="url("+this.handCursorURL_+")",p=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},d=function(){a.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(a.marker_,"mouseover",t))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(t){!a.marker_.getDraggable()&&!a.marker_.getClickable()||u||(this.style.cursor=a.marker_.getCursor(),google.maps.event.trigger(a.marker_,"mouseout",t))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(t){u=!1,a.marker_.getDraggable()&&(l=!0,this.style.cursor=h),(a.marker_.getDraggable()||a.marker_.getClickable())&&(google.maps.event.trigger(a.marker_,"mousedown",t),p(t))}),google.maps.event.addDomListener(document,"mouseup",function(e){var i;if(l&&(l=!1,a.eventDiv_.style.cursor="pointer",google.maps.event.trigger(a.marker_,"mouseup",e)),u){if(r){i=a.getProjection().fromLatLngToDivPixel(a.marker_.getPosition()),i.y+=c,a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(i));try{a.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(d,1406)}catch(o){}}a.crossDiv_.style.display="none",a.marker_.setZIndex(t),n=!0,u=!1,e.latLng=a.marker_.getPosition(),google.maps.event.trigger(a.marker_,"dragend",e)}}),google.maps.event.addListener(a.marker_.getMap(),"mousemove",function(n){var h;l&&(u?(n.latLng=new google.maps.LatLng(n.latLng.lat()-e,n.latLng.lng()-i),h=a.getProjection().fromLatLngToDivPixel(n.latLng),r&&(a.crossDiv_.style.left=h.x+"px",a.crossDiv_.style.top=h.y+"px",a.crossDiv_.style.display="",h.y-=c),a.marker_.setPosition(a.getProjection().fromDivPixelToLatLng(h)),r&&(a.eventDiv_.style.top=h.y+c+"px"),google.maps.event.trigger(a.marker_,"drag",n)):(e=n.latLng.lat()-a.marker_.getPosition().lat(),i=n.latLng.lng()-a.marker_.getPosition().lng(),t=a.marker_.getZIndex(),o=a.marker_.getPosition(),s=a.marker_.getMap().getCenter(),r=a.marker_.get("raiseOnDrag"),u=!0,a.marker_.setZIndex(1e6),n.latLng=a.marker_.getPosition(),google.maps.event.trigger(a.marker_,"dragstart",n)))}),google.maps.event.addDomListener(document,"keydown",function(t){u&&27===t.keyCode&&(r=!1,a.marker_.setPosition(o),a.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(n?n=!1:(google.maps.event.trigger(a.marker_,"click",t),p(t)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(t){(a.marker_.getDraggable()||a.marker_.getClickable())&&(google.maps.event.trigger(a.marker_,"dblclick",t),p(t))}),google.maps.event.addListener(this.marker_,"dragstart",function(){u||(r=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(){u||r&&(a.setPosition(c),a.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(){u||r&&a.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){a.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){a.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){a.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){a.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){a.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){a.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){a.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){a.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){a.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var t;for(null!==this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!==this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var t=this.marker_.get("labelContent");"undefined"==typeof t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t))
},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var t,e;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle");for(t in e)e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},MarkerLabel_.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.labelDiv_.style.display=this.marker_.get("labelVisible")&&this.marker_.getVisible()?"block":"none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},function(){angular.module("google-maps.wrapped",[]),angular.module("google-maps.extensions",["google-maps.wrapped"]),angular.module("google-maps.directives.api.utils",["google-maps.extensions"]),angular.module("google-maps.directives.api.managers",[]),angular.module("google-maps.directives.api.models.child",["google-maps.directives.api.utils"]),angular.module("google-maps.directives.api.models.parent",["google-maps.directives.api.managers","google-maps.directives.api.models.child"]),angular.module("google-maps.directives.api",["google-maps.directives.api.models.parent"]),angular.module("google-maps",["google-maps.directives.api"]).factory("debounce",["$timeout",function(t){return function(e){var i;return i=0,function(){var n,r,o;return o=this,n=arguments,i++,r=function(t){return function(){return t===i?e.apply(o,n):void 0}}(i),t(r,0,!0)}}}])}.call(this),function(){angular.module("google-maps.extensions").service("ExtendGWin",function(){return{init:_.once(function(){return(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)&&(google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},google.maps.InfoWindow.prototype.close=function(){this._isOpen=!1,this._close()},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},window.InfoBox)?(window.InfoBox.prototype._open=window.InfoBox.prototype.open,window.InfoBox.prototype._close=window.InfoBox.prototype.close,window.InfoBox.prototype._isOpen=!1,window.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},window.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},window.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},MarkerLabel_.prototype.setContent=function(){var t;t=this.marker_.get("labelContent"),t&&!_.isEqual(this.oldContent,t)&&("undefined"==typeof(null!=t?t.nodeType:void 0)?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=t):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.appendChild(t),this.oldContent=t))},MarkerLabel_.prototype.onRemove=function(){null!=this.labelDiv_.parentNode&&this.labelDiv_.parentNode.removeChild(this.labelDiv_),null!=this.eventDiv_.parentNode&&this.eventDiv_.parentNode.removeChild(this.eventDiv_),this.listeners_&&this.listeners_.length&&this.listeners_.forEach(function(t){return google.maps.event.removeListener(t)})}):void 0})}})}.call(this),function(){_.intersectionObjects=function(t,e,i){var n;return null==i&&(i=void 0),n=_.map(t,function(t){return _.find(e,function(e){return null!=i?i(t,e):_.isEqual(t,e)})}),_.filter(n,function(t){return null!=t})},_.containsObject=_.includeObject=function(t,e,i){return null==i&&(i=void 0),null===t?!1:_.any(t,function(t){return null!=i?i(t,e):_.isEqual(t,e)})},_.differenceObjects=function(t,e,i){return null==i&&(i=void 0),_.filter(t,function(t){return!_.containsObject(e,t,i)})},_.withoutObjects=_.differenceObjects,_.indexOfObject=function(t,e,i,n){var r,o;if(null==t)return-1;if(r=0,o=t.length,n){if("number"!=typeof n)return r=_.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,o+n):n}for(;o>r;){if(null!=i){if(i(t[r],e))return r}else if(_.isEqual(t[r],e))return r;r++}return-1},_["extends"]=function(t){return _.reduce(t,function(t,e){return _.extend(t,e)},{})},_.isNullOrUndefined=function(t){return _.isNull(t||_.isUndefined(t))}}.call(this),function(){String.prototype.contains=function(t,e){return-1!==this.indexOf(t,e)},String.prototype.flare=function(t){return null==t&&(t="nggmap"),t+this},String.prototype.ns=String.prototype.flare}.call(this),function(){var t;t={each:function(t,e,i,n,r,o,s){var a;if(null==r&&(r=20),null==o&&(o=0),null==s&&(s=1),!s)throw"pause (delay) must be set from _async!";return void 0===t||(null!=t?t.length:void 0)<=0?void i():(a=function(){var l,u;for(l=r,u=o;l--&&u<(t?t.length:u+1);)e(t[u],u),++u;if(t){if(u<t.length)return o=u,null!=n&&n(),setTimeout(a,s);if(i)return i()}})()},map:function(t,e,i,n,r){var o;return o=[],null==t?o:_async.each(t,function(t){return o.push(e(t))},function(){return i(o)},n,r)}},window._async=t,angular.module("google-maps.directives.api.utils").factory("async",function(){return window._async})}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};angular.module("google-maps.directives.api.utils").factory("BaseObject",function(){var e,i;return i=["extended","included"],e=function(){function e(){}return e.extend=function(e){var n,r,o;for(n in e)r=e[n],t.call(i,n)<0&&(this[n]=r);return null!=(o=e.extended)&&o.apply(this),this},e.include=function(e){var n,r,o;for(n in e)r=e[n],t.call(i,n)<0&&(this.prototype[n]=r);return null!=(o=e.included)&&o.apply(this),this},e}()})}.call(this),function(){angular.module("google-maps.directives.api.utils").factory("ChildEvents",function(){return{onChildCreation:function(){}}})}.call(this),function(){angular.module("google-maps.directives.api.utils").service("CtrlHandle",["$q",function(t){var e;return e={handle:function(e){return e.deferred=t.defer(),{getScope:function(){return e}}},mapPromise:function(t,e){var i;return i=e.getScope(),i.deferred.promise.then(function(e){return t.map=e}),i.deferred.promise}}}])}.call(this),function(){angular.module("google-maps.directives.api.utils").service("EventsHelper",["Logger",function(t){return{setEvents:function(e,i,n,r){return angular.isDefined(i.events)&&null!=i.events&&angular.isObject(i.events)?_.compact(_.map(i.events,function(o,s){var a;return r&&(a=_(r).contains(s)),i.events.hasOwnProperty(s)&&angular.isFunction(i.events[s])&&!a?google.maps.event.addListener(e,s,function(){return o.apply(i,[e,s,n,arguments])}):t.info("EventHelper: invalid event listener "+s)})):void 0},removeEvents:function(t){return null!=t?t.forEach(function(t){return google.maps.event.removeListener(t)}):void 0}}}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};angular.module("google-maps.directives.api.utils").factory("FitHelper",["BaseObject","Logger",function(t){var i,n;return i=function(t){function i(){return n=i.__super__.constructor.apply(this,arguments)}return e(i,t),i.prototype.fit=function(t,e){var i,n;return e&&t&&t.length>0?(i=new google.maps.LatLngBounds,n=!1,_async.each(t,function(t){return t?(n||(n=!0),i.extend(t.getPosition())):void 0},function(){return n?e.fitBounds(i):void 0})):void 0},i}(t)}])}.call(this),function(){angular.module("google-maps.directives.api.utils").service("GmapUtil",["Logger","$compile",function(t,e){var i,n,r,o,s;return n=function(t){return Array.isArray(t)&&2===t.length?t[1]:angular.isDefined(t.type)&&"Point"===t.type?t.coordinates[1]:t.latitude},r=function(t){return Array.isArray(t)&&2===t.length?t[0]:angular.isDefined(t.type)&&"Point"===t.type?t.coordinates[0]:t.longitude},i=function(t){return t?Array.isArray(t)&&2===t.length?new google.maps.LatLng(t[1],t[0]):angular.isDefined(t.type)&&"Point"===t.type?new google.maps.LatLng(t.coordinates[1],t.coordinates[0]):new google.maps.LatLng(t.latitude,t.longitude):void 0},o=function(t,e){return t?(Array.isArray(t)&&2===t.length?(t[1]=e.lat(),t[0]=e.lng()):angular.isDefined(t.type)&&"Point"===t.type?(t.coordinates[1]=e.lat(),t.coordinates[0]=e.lng()):(t.latitude=e.lat(),t.longitude=e.lng()),t):void 0},s=function(t){if(angular.isUndefined(t))return!1;if(_.isArray(t)){if(2===t.length)return!0}else if(null!=t&&(null!=t?t.type:void 0)&&"Point"===t.type&&_.isArray(t.coordinates)&&2===t.coordinates.length)return!0;return t&&angular.isDefined((null!=t?t.latitude:void 0)&&angular.isDefined(null!=t?t.longitude:void 0))?!0:!1},{getLabelPositionPoint:function(t){var e,i;return void 0===t?void 0:(t=/^([-\d\.]+)\s([-\d\.]+)$/.exec(t),e=parseFloat(t[1]),i=parseFloat(t[2]),null!=e&&null!=i?new google.maps.Point(e,i):void 0)},createMarkerOptions:function(t,e,n,r){var o;return null==r&&(r=void 0),null==n&&(n={}),o=angular.extend({},n,{position:null!=n.position?n.position:i(t),icon:null!=n.icon?n.icon:e,visible:null!=n.visible?n.visible:s(t)}),null!=r&&(o.map=r),o},createWindowOptions:function(n,r,o,s){return null!=o&&null!=s&&null!=e?angular.extend({},s,{content:this.buildContent(r,s,o),position:null!=s.position?s.position:angular.isObject(n)?n.getPosition():i(r.coords)}):s?s:(t.error("infoWindow defaults not defined"),o?void 0:t.error("infoWindow content not defined"))},buildContent:function(t,i,n){var r,o;return null!=i.content?o=i.content:null!=e?(r=e(n)(t),r.length>0&&(o=r[0])):o=n,o},defaultDelay:50,isTrue:function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},isFalse:function(t){return-1!==["false","FALSE",0,"n","N","no","NO"].indexOf(t)},getCoords:i,validateCoords:s,equalCoords:function(t,e){return n(t)===n(e)&&r(t)===r(e)},validatePath:function(t){var e,i,n,r;if(i=0,angular.isUndefined(t.type)){if(!Array.isArray(t)||t.length<2)return!1;for(;i<t.length;){if(!(angular.isDefined(t[i].latitude)&&angular.isDefined(t[i].longitude)||"function"==typeof t[i].lat&&"function"==typeof t[i].lng))return!1;i++}return!0}if(angular.isUndefined(t.coordinates))return!1;if("Polygon"===t.type){if(t.coordinates[0].length<4)return!1;e=t.coordinates[0]}else if("MultiPolygon"===t.type){if(r={max:0,index:0},_.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},r),n=t.coordinates[r.index],e=n[0],e.length<4)return!1}else{if("LineString"!==t.type)return!1;if(t.coordinates.length<2)return!1;e=t.coordinates}for(;i<e.length;){if(2!==e[i].length)return!1;i++}return!0},convertPathPoints:function(t){var e,i,n,r,o;if(i=0,r=new google.maps.MVCArray,angular.isUndefined(t.type))for(;i<t.length;)angular.isDefined(t[i].latitude)&&angular.isDefined(t[i].longitude)?n=new google.maps.LatLng(t[i].latitude,t[i].longitude):"function"==typeof t[i].lat&&"function"==typeof t[i].lng&&(n=t[i]),r.push(n),i++;else for("Polygon"===t.type?e=t.coordinates[0]:"MultiPolygon"===t.type?(o={max:0,index:0},_.forEach(t.coordinates,function(t,e){return t[0].length>this.max?(this.max=t[0].length,this.index=e):void 0},o),e=t.coordinates[o.index][0]):"LineString"===t.type&&(e=t.coordinates);i<e.length;)r.push(new google.maps.LatLng(e[i][1],e[i][0])),i++;return r},extendMapBounds:function(t,e){var i,n;for(i=new google.maps.LatLngBounds,n=0;n<e.length;)i.extend(e.getAt(n)),n++;return t.fitBounds(i)},getPath:function(t,e){var i;return i=t,_.each(e.split("."),function(t){return i?i=i[t]:void 0}),i},setCoordsFromEvent:o}}])}.call(this),function(){angular.module("google-maps.directives.api.utils").service("IsReady".ns(),["$q","$timeout",function(t,e){var i,n,r;return i=0,r=[],n=function(){return t.all(r)},{spawn:function(){var e;return e=t.defer(),r.push(e.promise),i+=1,{instance:i,deferred:e}},promises:n,instances:function(){return i},promise:function(r){var o,s;return null==r&&(r=1),o=t.defer(),s=function(){return e(function(){return i!==r?s():o.resolve(n())})},s(),o.promise}}}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};angular.module("google-maps.directives.api.utils").factory("Linked",["BaseObject",function(t){var i;return i=function(t){function i(t,e,i,n){this.scope=t,this.element=e,this.attrs=i,this.ctrls=n}return e(i,t),i}(t)}])}.call(this),function(){angular.module("google-maps.directives.api.utils").service("Logger",["$log",function(t){return{doLog:!1,info:function(e){return this.doLog?null!=t?t.info(e):console.info(e):void 0},error:function(e){return this.doLog?null!=t?t.error(e):console.error(e):void 0},warn:function(e){return this.doLog?null!=t?t.warn(e):console.warn(e):void 0}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.utils").factory("ModelKey",["BaseObject","GmapUtil",function(e,n){var r;return r=function(e){function r(e){this.scope=e,this.setIdKey=t(this.setIdKey,this),this.modelKeyComparison=t(this.modelKeyComparison,this),r.__super__.constructor.call(this),this.defaultIdKey="id",this.idKey=void 0}return i(r,e),r.prototype.evalModelHandle=function(t,e){return void 0===t||void 0===e?void 0:"self"===e?t:n.getPath(t,e)},r.prototype.modelKeyComparison=function(t,e){var i;if(i=null!=this.scope.coords?this.scope:this.parentScope,null==i)throw"No scope or parentScope set!";return n.equalCoords(this.evalModelHandle(t,i.coords),this.evalModelHandle(e,i.coords))},r.prototype.setIdKey=function(t){return this.idKey=null!=t.idKey?t.idKey:this.defaultIdKey},r.prototype.setVal=function(t,e,i){var n;return n=this.modelOrKey(t,e),n=i,t},r.prototype.modelOrKey=function(t,e){var i;return i="self"!==e?t[e]:t},r}(e)}])}.call(this),function(){angular.module("google-maps.directives.api.utils").factory("ModelsWatcher",["Logger",function(t){return{figureOutState:function(e,i,n,r,o){var s,a,l,u;return s=[],a={},l=[],u=[],_async.each(i.models,function(i){var o;return null==i[e]?t.error("id missing for model "+i.toString()+", can not use do comparison/insertion"):(a[i[e]]={},null==n[i[e]]?s.push(i):(o=n[i[e]],r(i,o.model)?void 0:u.push({model:i,child:o})))},function(){return _async.each(n.values(),function(i){var n;return null==i?void t.error("child undefined in ModelsWatcher."):null==i.model?void t.error("child.model undefined in ModelsWatcher."):(n=i.model[e],null==a[n]?l.push(i):void 0)},function(){return o({adds:s,removals:l,updates:u})})})}}}])}.call(this),function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t=["get","put","remove","values","keys","length","push","didValueStateChange","didKeyStateChange","slice","removeAll","allVals","allKeys","stateChanged"],window.PropMap=function(){function i(){this.removeAll=e(this.removeAll,this),this.slice=e(this.slice,this),this.push=e(this.push,this),this.keys=e(this.keys,this),this.values=e(this.values,this),this.remove=e(this.remove,this),this.put=e(this.put,this),this.stateChanged=e(this.stateChanged,this),this.get=e(this.get,this),this.length=0,this.didValueStateChange=!1,this.didKeyStateChange=!1,this.allVals=[],this.allKeys=[]}return i.prototype.get=function(t){return this[t]},i.prototype.stateChanged=function(){return this.didValueStateChange=!0,this.didKeyStateChange=!0},i.prototype.put=function(t,e){return null==this.get(t)&&this.length++,this.stateChanged(),this[t]=e},i.prototype.remove=function(t,e){var i;return null==e&&(e=!1),e&&!this.get(t)?void 0:(i=this[t],delete this[t],this.length--,this.stateChanged(),i)},i.prototype.values=function(){var e,i=this;return this.didValueStateChange?(e=[],this.keys().forEach(function(n){return-1===_.indexOf(t,n)?e.push(i[n]):void 0}),this.didValueStateChange=!1,this.keys(),this.allVals=e):this.allVals},i.prototype.keys=function(){var e,i;return this.didKeyStateChange?(i=_.keys(this),e=[],_.each(i,function(i){return-1===_.indexOf(t,i)?e.push(i):void 0}),this.didKeyStateChange=!1,this.values(),this.allKeys=e):this.allKeys},i.prototype.push=function(t,e){return null==e&&(e="key"),this.put(t[e],t)},i.prototype.slice=function(){var t=this;return this.keys().map(function(e){return t.remove(e)})},i.prototype.removeAll=function(){return this.slice()},i}(),angular.module("google-maps.directives.api.utils").factory("PropMap",function(){return window.PropMap})}.call(this),function(){angular.module("google-maps.directives.api.utils").factory("nggmap-PropertyAction",["Logger",function(){var t;return t=function(t,e){var i=this;return this.setIfChange=function(i,n){return _.isEqual(n,i||e)?void 0:t(i)},this.sic=function(t,e){return i.setIfChange(t,e)},this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.managers").factory("ClustererMarkerManager",["Logger","FitHelper","PropMap",function(e,n,r){var o;return o=function(n){function o(i,n,s,a){var l;this.opt_events=a,this.checkSync=t(this.checkSync,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.add=t(this.add,this),o.__super__.constructor.call(this),l=this,this.opt_options=s,this.clusterer=null!=s&&void 0===n?new NgMapMarkerClusterer(i,void 0,s):null!=s&&null!=n?new NgMapMarkerClusterer(i,n,s):new NgMapMarkerClusterer(i),this.propMapGMarkers=new r,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,e.info(this)}return i(o,n),o.prototype.checkKey=function(t){var e;return null==t.key?(e="gMarker.key undefined and it is REQUIRED!!",Logger.error(e)):void 0},o.prototype.add=function(t){var e;return this.checkKey(t),e=null!=this.propMapGMarkers.get(t.key),this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},o.prototype.addMany=function(t){var e=this;return t.forEach(function(t){return e.add(t)})},o.prototype.remove=function(t){var e;return this.checkKey(t),e=this.propMapGMarkers.get(t.key),e&&(this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},o.prototype.removeMany=function(t){var e=this;return t.forEach(function(t){return e.remove(t)})},o.prototype.draw=function(){return this.clusterer.repaint()},o.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},o.prototype.attachEvents=function(t,i){var n,r,o;if(angular.isDefined(t)&&null!=t&&angular.isObject(t)){o=[];for(r in t)n=t[r],t.hasOwnProperty(r)&&angular.isFunction(t[r])?(e.info(""+i+": Attaching event: "+r+" to clusterer"),o.push(google.maps.event.addListener(this.clusterer,r,t[r]))):o.push(void 0);return o}},o.prototype.clearEvents=function(t){var i,n,r;if(angular.isDefined(t)&&null!=t&&angular.isObject(t)){r=[];for(n in t)i=t[n],t.hasOwnProperty(n)&&angular.isFunction(t[n])?(e.info(""+optionsName+": Clearing event: "+n+" to clusterer"),r.push(google.maps.event.clearListeners(this.clusterer,n))):r.push(void 0);return r}},o.prototype.destroy=function(){return this.clearEvents(this.opt_events),this.clearEvents(this.opt_internal_events),this.clear()},o.prototype.fit=function(){return o.__super__.fit.call(this,this.getGMarkers(),this.clusterer.getMap())},o.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},o.prototype.checkSync=function(){if(this.getGMarkers().length!==this.propMapGMarkers.length)throw"GMarkers out of Sync in MarkerClusterer"},o}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.managers").factory("MarkerManager",["Logger","FitHelper","PropMap",function(e,n,r){var o;return o=function(o){function s(i){this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.add=t(this.add,this),s.__super__.constructor.call(this),this.gMap=i,this.gMarkers=new r,this.$log=e,this.$log.info(this)}return i(s,o),s.include(n),s.prototype.add=function(t,i){var n,r;if(null==i&&(i=!0),null==t.key)throw r="gMarker.key undefined and it is REQUIRED!!",e.error(r),r;return n=null!=this.gMarkers.get(t.key),n?void 0:(this.handleOptDraw(t,i,!0),this.gMarkers.put(t.key,t))},s.prototype.addMany=function(t){var e=this;return t.forEach(function(t){return e.add(t)})},s.prototype.remove=function(t,e){return null==e&&(e=!0),this.handleOptDraw(t,e,!1),this.gMarkers.get(t.key)?this.gMarkers.remove(t.key):void 0},s.prototype.removeMany=function(){var t=this;return this.gMarkers.values().forEach(function(e){return t.remove(e)})},s.prototype.draw=function(){var t,e=this;return t=[],this.gMarkers.values().forEach(function(i){return i.isDrawn?void 0:i.doAdd?(i.setMap(e.gMap),i.isDrawn=!0):t.push(i)}),t.forEach(function(t){return t.isDrawn=!1,e.remove(t,!0)})},s.prototype.clear=function(){return this.gMarkers.values().forEach(function(t){return t.setMap(null)}),delete this.gMarkers,this.gMarkers=new r},s.prototype.handleOptDraw=function(t,e,i){return e===!0?(t.setMap(i?this.gMap:null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=i)},s.prototype.fit=function(){return s.__super__.fit.call(this,this.getGMarkers(),this.gMap)},s.prototype.getGMarkers=function(){return this.gMarkers.values()},s}(n)}])}.call(this),function(){angular.module("google-maps").factory("array-sync",["add-events",function(t){return function(e,i,n,r){var o,s,a,l,u,c,h,p,d;return l=!1,p=i.$eval(n),i["static"]||(u={set_at:function(t){var i;if(!l&&(i=e.getAt(t)))return i.lng&&i.lat?(p[t].latitude=i.lat(),p[t].longitude=i.lng()):p[t]=i},insert_at:function(t){var i;if(!l&&(i=e.getAt(t)))return i.lng&&i.lat?p.splice(t,0,{latitude:i.lat(),longitude:i.lng()}):p.splice(t,0,i)},remove_at:function(t){return l?void 0:p.splice(t,1)}},"Polygon"===p.type?o=p.coordinates[0]:"LineString"===p.type&&(o=p.coordinates),s={set_at:function(t){var i;if(!l&&(i=e.getAt(t),i&&i.lng&&i.lat))return o[t][1]=i.lat(),o[t][0]=i.lng()},insert_at:function(t){var i;if(!l&&(i=e.getAt(t),i&&i.lng&&i.lat))return o.splice(t,0,[i.lng(),i.lat()])},remove_at:function(t){return l?void 0:o.splice(t,1)}},h=t(e,angular.isUndefined(p.type)?u:s)),c=function(t){var i,n,o,s,a,u,c,h;if(l=!0,u=e,i=!1,t){for(n=0,c=u.getLength(),s=t.length,o=Math.min(c,s),a=void 0;o>n;)h=u.getAt(n),a=t[n],"function"==typeof a.equals?a.equals(h)||(u.setAt(n,a),i=!0):(h.lat()!==a.latitude||h.lng()!==a.longitude)&&(u.setAt(n,new google.maps.LatLng(a.latitude,a.longitude)),i=!0),n++;for(;s>n;)a=t[n],u.push("function"==typeof a.lat&&"function"==typeof a.lng?a:new google.maps.LatLng(a.latitude,a.longitude)),i=!0,n++;for(;c>n;)u.pop(),i=!0,n++}return l=!1,i?r(u):void 0},a=function(t){var i,n,o,s,a,u,c,h,d;if(l=!0,c=e,n=!1,t){for("Polygon"===p.type?i=t.coordinates[0]:"LineString"===p.type&&(i=t.coordinates),o=0,h=c.getLength(),a=i.length,s=Math.min(h,a),u=void 0;s>o;)d=c.getAt(o),u=i[o],(d.lat()!==u[1]||d.lng()!==u[0])&&(c.setAt(o,new google.maps.LatLng(u[1],u[0])),n=!0),o++;for(;a>o;)u=i[o],c.push(new google.maps.LatLng(u[1],u[0])),n=!0,o++;for(;h>o;)c.pop(),n=!0,o++}return l=!1,n?r(c):void 0},i["static"]||(d=angular.isUndefined(p.type)?i.$watchCollection(n,c):i.$watch(n,a,!0)),function(){return h&&(h(),h=null),d?(d(),d=null):void 0}}}])}.call(this),function(){angular.module("google-maps").factory("add-events",["$timeout",function(t){var e,i;return e=function(e,i,n){return google.maps.event.addListener(e,i,function(){return n.apply(this,arguments),t(function(){},!0)})},i=function(t,i,n){var r;return n?e(t,i,n):(r=[],angular.forEach(i,function(i,n){return r.push(e(t,n,i))}),function(){return angular.forEach(r,function(t){return google.maps.event.removeListener(t)}),r=null})}}])}.call(this),function(){angular.module("google-maps.directives.api.models.child").factory("DrawFreeHandChildModel",["Logger","$q",function(t,e){var i,n;return i=function(t,e,i){var n,r;return this.polys=e,r=new google.maps.Polyline({map:t,clickable:!1}),n=google.maps.event.addListener(t,"mousemove",function(t){return r.getPath().push(t.latLng)}),void google.maps.event.addListenerOnce(t,"mouseup",function(){var o;return google.maps.event.removeListener(n),o=r.getPath(),r.setMap(null),e.push(new google.maps.Polygon({map:t,path:o})),r=null,google.maps.event.clearListeners(t.getDiv(),"mousedown"),i()})},n=function(n){var r,o,s=this;return this.map=n,o=function(){var t;return null!=(t=s.deferred)&&t.resolve(),s.map.setOptions(s.oldOptions)},r=function(){return t.info("disabling map move"),s.oldOptions=n.getOptions(),s.map.setOptions({draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1})},this.engage=function(n){return s.polys=n,s.deferred=e.defer(),r(),t.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(s.map.getDiv(),"mousedown",function(){return i(s.map,s.polys,o)}),s.deferred.promise},this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.child").factory("MarkerLabelChildModel",["BaseObject","GmapUtil",function(e,n){var r;return r=function(e){function r(e,i,n){this.destroy=t(this.destroy,this),this.setOptions=t(this.setOptions,this);var o;r.__super__.constructor.call(this),o=this,this.gMarker=e,this.setOptions(i),this.gMarkerLabel=new MarkerLabel_(this.gMarker,i.crossImage,i.handCursor),this.gMarker.set("setMap",function(t){return o.gMarkerLabel.setMap(t),google.maps.Marker.prototype.setMap.apply(this,arguments)}),this.gMarker.setMap(n)}return i(r,e),r.include(n),r.prototype.setOption=function(t,e){return this.gMarker.set(t,e)},r.prototype.setOptions=function(t){var e,i;return(null!=t?t.labelContent:void 0)&&this.gMarker.set("labelContent",t.labelContent),(null!=t?t.labelAnchor:void 0)&&this.gMarker.set("labelAnchor",this.getLabelPositionPoint(t.labelAnchor)),this.gMarker.set("labelClass",t.labelClass||"labels"),this.gMarker.set("labelStyle",t.labelStyle||{opacity:100}),this.gMarker.set("labelInBackground",t.labelInBackground||!1),t.labelVisible||this.gMarker.set("labelVisible",!0),t.raiseOnDrag||this.gMarker.set("raiseOnDrag",!0),t.clickable||this.gMarker.set("clickable",!0),t.draggable||this.gMarker.set("draggable",!1),t.optimized||this.gMarker.set("optimized",!1),t.crossImage=null!=(e=t.crossImage)?e:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=null!=(i=t.handCursor)?i:document.location.protocol+"//maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur"},r.prototype.destroy=function(){return null!=this.gMarkerLabel.labelDiv_.parentNode&&null!=this.gMarkerLabel.eventDiv_.parentNode?this.gMarkerLabel.onRemove():void 0},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.child").factory("MarkerChildModel",["ModelKey","GmapUtil","Logger","$injector","EventsHelper",function(e,n,r,o,s){var a;return a=function(e){function a(e,i,n,o,s,l,u,c,h){var p=this;this.model=e,this.parentScope=i,this.gMap=n,this.$timeout=o,this.defaults=s,this.doClick=l,this.gMarkerManager=u,this.idKey=null!=c?c:"id",this.doDrawSelf=null!=h?h:!0,this.watchDestroy=t(this.watchDestroy,this),this.internalEvents=t(this.internalEvents,this),this.setLabelOptions=t(this.setLabelOptions,this),this.setOptions=t(this.setOptions,this),this.setIcon=t(this.setIcon,this),this.setCoords=t(this.setCoords,this),this.destroy=t(this.destroy,this),this.maybeSetScopeValue=t(this.maybeSetScopeValue,this),this.createMarker=t(this.createMarker,this),this.setMyScope=t(this.setMyScope,this),null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),this.iconKey=this.parentScope.icon,this.coordsKey=this.parentScope.coords,this.clickKey=this.parentScope.click(),this.optionsKey=this.parentScope.options,this.needRedraw=!1,a.__super__.constructor.call(this,this.parentScope.$new(!1)),this.scope.model=this.model,this.setMyScope(this.model,void 0,!0),this.createMarker(this.model),this.scope.$watch("model",function(t,e){return t!==e?(p.setMyScope(t,e),p.needRedraw=!0):void 0},!0),r.info(this),this.watchDestroy(this.scope)}return i(a,e),a.include(n),a.include(s),a.prototype.setMyScope=function(t,e,i){var n=this;return null==e&&(e=void 0),null==i&&(i=!1),this.maybeSetScopeValue("icon",t,e,this.iconKey,this.evalModelHandle,i,this.setIcon),this.maybeSetScopeValue("coords",t,e,this.coordsKey,this.evalModelHandle,i,this.setCoords),_.isFunction(this.clickKey)&&o?this.scope.click=function(){return o.invoke(n.clickKey,void 0,{$markerModel:t})}:(this.maybeSetScopeValue("click",t,e,this.clickKey,this.evalModelHandle,i),this.createMarker(t,e,i))
},a.prototype.createMarker=function(t,e,i){return null==e&&(e=void 0),null==i&&(i=!1),this.maybeSetScopeValue("options",t,e,this.optionsKey,this.evalModelHandle,i,this.setOptions),this.parentScope.options&&!this.scope.options?r.error("Options not found on model!"):void 0},a.prototype.maybeSetScopeValue=function(t,e,i,n,r,o,s){var a,l;return null==s&&(s=void 0),void 0===i?(this.scope[t]=r(e,n),void(o||null!=s&&s(this.scope))):(l=r(i,n),a=r(e,n),a!==l&&(this.scope[t]=a,!o&&(null!=s&&s(this.scope),this.doDrawSelf))?this.gMarkerManager.draw():void 0)},a.prototype.destroy=function(){return null!=this.gMarker?(this.removeEvents(this.externalListeners),this.removeEvents(this.internalListeners),this.gMarkerManager.remove(this.gMarker,!0),delete this.gMarker,this.scope.$destroy()):void 0},a.prototype.setCoords=function(t){return t.$id===this.scope.$id&&void 0!==this.gMarker?null!=t.coords?this.validateCoords(this.scope.coords)?(this.gMarker.setPosition(this.getCoords(t.coords)),this.gMarker.setVisible(this.validateCoords(t.coords)),this.gMarkerManager.add(this.gMarker)):void r.error("MarkerChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(this.model)):this.gMarkerManager.remove(this.gMarker):void 0},a.prototype.setIcon=function(t){return t.$id===this.scope.$id&&void 0!==this.gMarker?(this.gMarkerManager.remove(this.gMarker),this.gMarker.setIcon(t.icon),this.gMarkerManager.add(this.gMarker),this.gMarker.setPosition(this.getCoords(t.coords)),this.gMarker.setVisible(this.validateCoords(t.coords))):void 0},a.prototype.setOptions=function(t){var e,i;if(t.$id===this.scope.$id&&(null!=this.gMarker&&(this.gMarkerManager.remove(this.gMarker),delete this.gMarker),null!=(i=t.coords)?i:"function"==typeof t.icon?t.icon(null!=t.options):void 0))return this.opts=this.createMarkerOptions(t.coords,t.icon,t.options),delete this.gMarker,this.gMarker=t.isLabel?new MarkerWithLabel(this.setLabelOptions(this.opts)):new google.maps.Marker(this.opts),this.externalListeners=this.setEvents(this.gMarker,this.parentScope,this.model,e=["dragend"]),this.internalListeners=this.setEvents(this.gMarker,{events:this.internalEvents()},this.model),null!=this.id&&(this.gMarker.key=this.id),this.gMarkerManager.add(this.gMarker)},a.prototype.setLabelOptions=function(t){return t.labelAnchor=this.getLabelPositionPoint(t.labelAnchor),t},a.prototype.internalEvents=function(){var t=this;return{dragend:function(e,i,n,r){var o,s,a;return o=t.setCoordsFromEvent(t.modelOrKey(t.scope.model,t.coordsKey),t.gMarker.getPosition()),t.scope.model=t.setVal(n,t.coordsKey,o),null!=(null!=(s=t.parentScope.events)?s.dragend:void 0)&&null!=(a=t.parentScope.events)&&a.dragend(e,i,t.scope.model,r),t.scope.$apply()},click:function(){return t.doClick&&null!=t.scope.click?(t.scope.click(),t.scope.$apply()):void 0}}},a.prototype.watchDestroy=function(t){return t.$on("$destroy",this.destroy)},a}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("PolylineChildModel",["BaseObject","Logger","$timeout","array-sync","GmapUtil","EventsHelper",function(e,n,r,o,s,a){var l;return l=function(e){function r(e,i,r,s,a){var l=this;this.scope=e,this.attrs=i,this.map=r,this.defaults=s,this.model=a,this.clean=t(this.clean,this),this.buildOpts=t(this.buildOpts,this),e.$watch("path",function(t,i){var n;return _.isEqual(t,i)&&l.polyline||(n=l.convertPathPoints(e.path),n.length>0&&(l.polyline=new google.maps.Polyline(l.buildOpts(n))),!l.polyline)?void 0:(e.fit&&l.extendMapBounds(r,n),o(l.polyline.getPath(),e,"path",function(t){return e.fit?l.extendMapBounds(r,t):void 0}),l.listeners=l.model?l.setEvents(l.polyline,e,l.model):l.setEvents(l.polyline,e,e))}),!e["static"]&&angular.isDefined(e.editable)&&e.$watch("editable",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setEditable(t):void 0}),angular.isDefined(e.draggable)&&e.$watch("draggable",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setDraggable(t):void 0}),angular.isDefined(e.visible)&&e.$watch("visible",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setVisible(t):void 0}),angular.isDefined(e.geodesic)&&e.$watch("geodesic",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setOptions(l.buildOpts(l.polyline.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.weight)&&e.$watch("stroke.weight",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setOptions(l.buildOpts(l.polyline.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.color)&&e.$watch("stroke.color",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setOptions(l.buildOpts(l.polyline.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.opacity)&&e.$watch("stroke.opacity",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setOptions(l.buildOpts(l.polyline.getPath())):void 0}),angular.isDefined(e.icons)&&e.$watch("icons",function(t,e){var i;return t!==e&&null!=(i=l.polyline)?i.setOptions(l.buildOpts(l.polyline.getPath())):void 0}),e.$on("$destroy",function(){return l.clean(),l.scope=null}),n.info(this)}return i(r,e),r.include(s),r.include(a),r.prototype.buildOpts=function(t){var e,i=this;return e=angular.extend({},this.defaults,{map:this.map,path:t,icons:this.scope.icons,strokeColor:this.scope.stroke&&this.scope.stroke.color,strokeOpacity:this.scope.stroke&&this.scope.stroke.opacity,strokeWeight:this.scope.stroke&&this.scope.stroke.weight}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0,"static":!1,fit:!1},function(t,n){return e[n]=angular.isUndefined(i.scope[n])||null===i.scope[n]?t:i.scope[n]}),e["static"]&&(e.editable=!1),e},r.prototype.clean=function(){var t;return this.removeEvents(this.listeners),this.polyline.setMap(null),this.polyline=null,t?(t(),t=null):void 0},r.prototype.destroy=function(){return this.scope.$destroy()},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.child").factory("WindowChildModel",["BaseObject","GmapUtil","Logger","$compile","$http","$templateCache",function(e,n,r,o,s,a){var l;return l=function(e){function l(e,i,n,o,s,a,l,u,c){var h=this;this.model=e,this.scope=i,this.opts=n,this.isIconVisibleOnClick=o,this.mapCtrl=s,this.markerCtrl=a,this.element=l,this.needToManualDestroy=null!=u?u:!1,this.markerIsVisibleAfterWindowClose=null!=c?c:!0,this.destroy=t(this.destroy,this),this.remove=t(this.remove,this),this.hideWindow=t(this.hideWindow,this),this.getLatestPosition=t(this.getLatestPosition,this),this.showWindow=t(this.showWindow,this),this.handleClick=t(this.handleClick,this),this.watchOptions=t(this.watchOptions,this),this.watchCoords=t(this.watchCoords,this),this.watchShow=t(this.watchShow,this),this.createGWin=t(this.createGWin,this),this.watchElement=t(this.watchElement,this),this.googleMapsHandles=[],this.$log=r,this.createGWin(),null!=this.markerCtrl&&this.markerCtrl.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchShow(),this.watchCoords(),this.scope.$on("$destroy",function(){return h.destroy()}),this.$log.info(this)}return i(l,e),l.include(n),l.prototype.watchElement=function(){var t=this;return this.scope.$watch(function(){var e;if(t.element&&t.html)return t.html!==t.element.html()&&t.gWin?(null!=(e=t.opts)&&(e.content=void 0),t.remove(),t.createGWin(),t.showHide()):void 0})},l.prototype.createGWin=function(){var t,e=this;return null==this.gWin&&(t={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),t=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),this.opts=this.createWindowOptions(this.markerCtrl,this.scope,this.html,t)),null==this.opts||this.gWin?void 0:(this.gWin=this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?new window.InfoBox(this.opts):new google.maps.InfoWindow(this.opts),this.gWin&&this.handleClick(),this.googleMapsHandles.push(google.maps.event.addListener(this.gWin,"closeclick",function(){return e.markerCtrl&&(e.markerCtrl.setAnimation(e.oldMarkerAnimation),e.markerIsVisibleAfterWindowClose&&_.delay(function(){return e.markerCtrl.setVisible(!1),e.markerCtrl.setVisible(e.markerIsVisibleAfterWindowClose)},250)),e.gWin.isOpen(!1),null!=e.scope.closeClick?e.scope.closeClick():void 0})))},l.prototype.watchShow=function(){var t=this;return this.scope.$watch("show",function(e,i){return e!==i?e?t.showWindow():t.hideWindow():null!=t.gWin&&e&&!t.gWin.getMap()?t.showWindow():void 0},!0)},l.prototype.watchCoords=function(){var t,e=this;return t=null!=this.markerCtrl?this.scope.$parent:this.scope,t.$watch("coords",function(t,i){var n;if(t!==i){if(null==t)return e.hideWindow();if(!e.validateCoords(t))return void e.$log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(e.model));if(n=e.getCoords(t),e.gWin.setPosition(n),e.opts)return e.opts.position=n}},!0)},l.prototype.watchOptions=function(){var t,e=this;return t=null!=this.markerCtrl?this.scope.$parent:this.scope,t.$watch("options",function(t,i){return t!==i&&(e.opts=t,null!=e.gWin)?e.gWin.setOptions(e.opts):void 0},!0)},l.prototype.handleClick=function(t){var e,i=this;return e=function(){var t;return null==i.gWin&&i.createGWin(),t=i.markerCtrl.getPosition(),null!=i.gWin&&(i.gWin.setPosition(t),i.opts&&(i.opts.position=t),i.showWindow()),i.initialMarkerVisibility=i.markerCtrl.getVisible(),i.oldMarkerAnimation=i.markerCtrl.getAnimation(),i.markerCtrl.setVisible(i.isIconVisibleOnClick)},null!=this.markerCtrl?(t&&e(),this.googleMapsHandles.push(google.maps.event.addListener(this.markerCtrl,"click",e))):void 0},l.prototype.showWindow=function(){var t,e=this;return t=function(){return!e.gWin||!e.scope.show&&null!=e.scope.show||e.gWin.isOpen()?void 0:e.gWin.open(e.mapCtrl)},this.scope.templateUrl?(this.gWin&&s.get(this.scope.templateUrl,{cache:a}).then(function(t){var i,n;return n=e.scope.$new(),angular.isDefined(e.scope.templateParameter)&&(n.parameter=e.scope.templateParameter),i=o(t.data)(n),e.gWin.setContent(i[0])}),t()):t()},l.prototype.showHide=function(){return this.scope.show||null==this.scope.show?this.showWindow():this.hideWindow()},l.prototype.getLatestPosition=function(t){return null==this.gWin||null==this.markerCtrl||t?t?this.gWin.setPosition(t):void 0:this.gWin.setPosition(this.markerCtrl.getPosition())},l.prototype.hideWindow=function(){return null!=this.gWin&&this.gWin.isOpen()?this.gWin.close():void 0},l.prototype.remove=function(){return this.hideWindow(),_.each(this.googleMapsHandles,function(t){return google.maps.event.removeListener(t)}),this.googleMapsHandles.length=0,delete this.gWin,delete this.opts},l.prototype.destroy=function(t){var e;return null==t&&(t=!1),this.remove(),null!=this.scope&&(this.needToManualDestroy||t)&&this.scope.$destroy(),e=void 0},l}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("IMarkerParentModel",["ModelKey","Logger",function(e,n){var r;return r=function(e){function r(e,i,o,s,a){var l,u=this;if(this.scope=e,this.element=i,this.attrs=o,this.map=s,this.$timeout=a,this.onDestroy=t(this.onDestroy,this),this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),r.__super__.constructor.call(this,this.scope),l=this,this.$log=n,!this.validateScope(e))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=angular.isDefined(o.click),null!=e.options&&(this.DEFAULTS=e.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),e.$on("$destroy",function(){return u.onDestroy(e)})}return i(r,e),r.prototype.DEFAULTS={},r.prototype.validateScope=function(t){var e;return null==t?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(e=null!=t.coords,e?e:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},r.prototype.watch=function(t,e){var i=this;return e.$watch(t,function(n,r){return _.isEqual(n,r)?void 0:i.onWatch(t,e,n,r)},!0)},r.prototype.onWatch=function(){throw new String("OnWatch Not Implemented!!")},r.prototype.onDestroy=function(){throw new String("OnDestroy Not Implemented!!")},r}(e)}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};angular.module("google-maps.directives.api.models.parent").factory("IWindowParentModel",["ModelKey","GmapUtil","Logger",function(t,i,n){var r;return r=function(t){function r(t,e,i,o,s,a,l,u){var c;r.__super__.constructor.call(this,t),c=this,this.$log=n,this.$timeout=s,this.$compile=a,this.$http=l,this.$templateCache=u,null!=t.options&&(this.DEFAULTS=t.options)}return e(r,t),r.include(i),r.prototype.DEFAULTS={},r}(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("LayerParentModel",["BaseObject","Logger","$timeout",function(e,n){var r;return r=function(e){function r(e,i,r,o,s,a){var l=this;return this.scope=e,this.element=i,this.attrs=r,this.gMap=o,this.onLayerCreated=null!=s?s:void 0,this.$log=null!=a?a:n,this.createGoogleLayer=t(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.doShow=!0,angular.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.layer.setMap(this.gMap),this.scope.$watch("show",function(t,e){return t!==e?(l.doShow=t,l.layer.setMap(t?l.gMap:null)):void 0},!0),this.scope.$watch("options",function(t,e){return t!==e?(l.layer.setMap(null),l.layer=null,l.createGoogleLayer()):void 0},!0),void this.scope.$on("$destroy",function(){return l.layer.setMap(null)}))}return i(r,e),r.prototype.createGoogleLayer=function(){var t;return this.layer=null==this.attrs.options?void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.layer&&null!=this.onLayerCreated&&(t=this.onLayerCreated(this.scope,this.layer))?t(this.layer):void 0},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("MarkerParentModel",["IMarkerParentModel","GmapUtil","EventsHelper","ModelKey",function(e,n,r){var o;return o=function(e){function o(e,i,n,r,s,a,l){var u,c=this;this.gMarkerManager=a,this.doFit=l,this.onDestroy=t(this.onDestroy,this),this.setGMarker=t(this.setGMarker,this),this.onWatch=t(this.onWatch,this),o.__super__.constructor.call(this,e,i,n,r,s),u=this.createMarkerOptions(e.coords,e.icon,e.options,this.map),this.setGMarker(new google.maps.Marker(u)),this.listener=google.maps.event.addListener(this.scope.gMarker,"click",function(){return c.doClick&&null!=e.click?c.scope.click():void 0}),this.setEvents(this.scope.gMarker,e,e),this.$log.info(this)}return i(o,e),o.include(n),o.include(r),o.prototype.onWatch=function(t,e){var i,n,r;switch(t){case"coords":if(this.validateCoords(e.coords)&&null!=this.scope.gMarker){if(n=null!=(r=this.scope.gMarker)?r.getPosition():void 0,n.lat()===this.scope.coords.latitude&&this.scope.coords.longitude===n.lng())return;return i=this.scope.gMarker.getAnimation(),this.scope.gMarker.setMap(this.map),this.scope.gMarker.setPosition(this.getCoords(e.coords)),this.scope.gMarker.setVisible(this.validateCoords(e.coords)),this.scope.gMarker.setAnimation(i)}return this.scope.gMarker.setMap(null);case"icon":if(null!=e.icon&&this.validateCoords(e.coords)&&null!=this.scope.gMarker)return this.scope.gMarker.setIcon(e.icon),this.scope.gMarker.setMap(null),this.scope.gMarker.setMap(this.map),this.scope.gMarker.setPosition(this.getCoords(e.coords)),this.scope.gMarker.setVisible(this.validateCoords(e.coords));break;case"options":if(this.validateCoords(e.coords)&&null!=e.icon&&e.options)return null!=this.scope.gMarker&&this.scope.gMarker.setMap(null),this.setGMarker(new google.maps.Marker(this.createMarkerOptions(e.coords,e.icon,e.options,this.map)))}},o.prototype.setGMarker=function(t){return this.scope.gMarker&&(delete this.scope.gMarker,this.gMarkerManager.remove(this.scope.gMarker,!1)),this.scope.gMarker=t,this.scope.gMarker&&(this.scope.gMarker.key=this.scope.idKey,this.gMarkerManager.add(this.scope.gMarker,!1),this.doFit)?this.gMarkerManager.fit():void 0},o.prototype.onDestroy=function(){var t;return this.scope.gMarker?(this.scope.gMarker.setMap(null),google.maps.event.removeListener(this.listener),this.listener=null,this.gMarkerManager.remove(this.scope.gMarker,!1),delete this.scope.gMarker,t=void 0):void(t=void 0)},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("MarkersParentModel",["IMarkerParentModel","ModelsWatcher","PropMap","MarkerChildModel","ClustererMarkerManager","MarkerManager",function(e,n,r,o,s,a){var l;return l=function(e){function l(e,i,n,o,s){this.onDestroy=t(this.onDestroy,this),this.newChildMarker=t(this.newChildMarker,this),this.updateChild=t(this.updateChild,this),this.pieceMeal=t(this.pieceMeal,this),this.reBuildMarkers=t(this.reBuildMarkers,this),this.createMarkersFromScratch=t(this.createMarkersFromScratch,this),this.validateScope=t(this.validateScope,this),this.onWatch=t(this.onWatch,this);var a,u=this;l.__super__.constructor.call(this,e,i,n,o,s),a=this,this.scope.markerModels=new r,this.$timeout=s,this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,this.setIdKey(e),this.scope.$watch("doRebuildAll",function(t,e){return t!==e?u.doRebuildAll=t:void 0}),this.watch("models",e),this.watch("doCluster",e),this.watch("clusterOptions",e),this.watch("clusterEvents",e),this.watch("fit",e),this.watch("idKey",e),this.gMarkerManager=void 0,this.createMarkersFromScratch(e)}return i(l,e),l.include(n),l.prototype.onWatch=function(t,e,i,n){return"idKey"===t&&i!==n&&(this.idKey=i),this.doRebuildAll?this.reBuildMarkers(e):this.pieceMeal(e)},l.prototype.validateScope=function(t){var e;return e=angular.isUndefined(t.models)||void 0===t.models,e&&this.$log.error(this.constructor.name+": no valid models attribute found"),l.__super__.validateScope.call(this,t)||e},l.prototype.createMarkersFromScratch=function(t){var e=this;return t.doCluster?(t.clusterEvents&&(this.clusterInternalOptions=_.once(function(){var i,n,r,o;return i=e,e.origClusterEvents?void 0:(e.origClusterEvents={click:null!=(n=t.clusterEvents)?n.click:void 0,mouseout:null!=(r=t.clusterEvents)?r.mouseout:void 0,mouseover:null!=(o=t.clusterEvents)?o.mouseover:void 0},_.extend(t.clusterEvents,{click:function(t){return i.maybeExecMappedEvent(t,"click")},mouseout:function(t){return i.maybeExecMappedEvent(t,"mouseout")},mouseover:function(t){return i.maybeExecMappedEvent(t,"mouseover")}}))})()),t.clusterOptions||t.clusterEvents?void 0===this.gMarkerManager?this.gMarkerManager=new s(this.map,void 0,t.clusterOptions,this.clusterInternalOptions):this.gMarkerManager.opt_options!==t.clusterOptions&&(this.gMarkerManager=new s(this.map,void 0,t.clusterOptions,this.clusterInternalOptions)):this.gMarkerManager=new s(this.map)):this.gMarkerManager=new a(this.map),_async.each(t.models,function(i){return e.newChildMarker(i,t)},function(){return e.gMarkerManager.draw(),t.fit?e.gMarkerManager.fit():void 0})},l.prototype.reBuildMarkers=function(t){return t.doRebuild||void 0===t.doRebuild?(this.onDestroy(t),this.createMarkersFromScratch(t)):void 0},l.prototype.pieceMeal=function(t){var e=this;return null!=this.scope.models&&this.scope.models.length>0&&this.scope.markerModels.length>0?this.figureOutState(this.idKey,t,this.scope.markerModels,this.modelKeyComparison,function(i){var n;return n=i,_async.each(n.removals,function(t){return null!=t?(null!=t.destroy&&t.destroy(),e.scope.markerModels.remove(t.id)):void 0},function(){return _async.each(n.adds,function(i){return e.newChildMarker(i,t)},function(){return _async.each(n.updates,function(t){return e.updateChild(t.child,t.model)},function(){return n.adds.length>0||n.removals.length>0||n.updates.length>0?(e.gMarkerManager.draw(),t.markerModels=e.scope.markerModels):void 0})})})}):this.reBuildMarkers(t)},l.prototype.updateChild=function(t,e){return null==e[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):t.setMyScope(e,t.model,!1)},l.prototype.newChildMarker=function(t,e){var i,n;return null==t[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",i,"markers",this.scope.markerModels),i=new o(t,e,this.map,this.$timeout,this.DEFAULTS,this.doClick,this.gMarkerManager,this.idKey,n=!1),this.scope.markerModels.put(t[this.idKey],i),i)},l.prototype.onDestroy=function(){return _.each(this.scope.markerModels.values(),function(t){return null!=t?t.destroy():void 0}),delete this.scope.markerModels,this.scope.markerModels=new r,null!=this.gMarkerManager?this.gMarkerManager.clear():void 0},l.prototype.maybeExecMappedEvent=function(t,e){var i,n;return _.isFunction(null!=(n=this.scope.clusterEvents)?n[e]:void 0)&&(i=this.mapClusterToMarkerModels(t),this.origClusterEvents[e])?this.origClusterEvents[e](i.cluster,i.mapped):void 0},l.prototype.mapClusterToMarkerModels=function(t){var e,i,n=this;return e=t.getMarkers().values(),i=e.map(function(t){return n.scope.markerModels[t.key].model}),{cluster:t,mapped:i}},l}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("PolylinesParentModel",["$timeout","Logger","ModelKey","ModelsWatcher","PropMap","PolylineChildModel",function(e,n,r,o,s,a){var l;return l=function(e){function r(e,i,o,a,l){var u,c=this;this.scope=e,this.element=i,this.attrs=o,this.gMap=a,this.defaults=l,this.modelKeyComparison=t(this.modelKeyComparison,this),this.setChildScope=t(this.setChildScope,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this),r.__super__.constructor.call(this,e),u=this,this.$log=n,this.plurals=new s,this.scopePropNames=["path","stroke","clickable","draggable","editable","geodesic","icons","visible"],_.each(this.scopePropNames,function(t){return c[t+"Key"]=void 0}),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.watchOurScope(e),this.createChildScopes()}return i(r,e),r.include(o),r.prototype.watch=function(t,e,i){var n=this;return t.$watch(e,function(t,r){return t!==r?(n[i]="function"==typeof t?t():t,_async.each(_.values(n.plurals),function(t){return t.scope[e]="self"===n[i]?t:t[n[i]]},function(){})):void 0})},r.prototype.watchModels=function(t){var e=this;return t.$watch("models",function(i,n){return _.isEqual(i,n)?void 0:e.doINeedToWipe(i)?e.rebuildAll(t,!0,!0):e.createChildScopes(!1)},!0)},r.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.plurals.length>0&&e},r.prototype.rebuildAll=function(t,e,i){var n=this;return _async.each(this.plurals.values(),function(t){return t.destroy()},function(){return i&&delete n.plurals,n.plurals=new s,e?n.createChildScopes():void 0})},r.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){return e.rebuildAll(t,!1,!0)})},r.prototype.watchOurScope=function(t){var e=this;return _.each(this.scopePropNames,function(i){var n;return n=i+"Key",e[n]="function"==typeof t[i]?t[i]():t[i],e.watch(t,i,n)})},r.prototype.createChildScopes=function(t){return null==t&&(t=!0),angular.isUndefined(this.scope.models)?void this.$log.error("No models to create polylines from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},r.prototype.watchIdKey=function(t){var e=this;return this.setIdKey(t),t.$watch("idKey",function(i,n){return i!==n&&null==i?(e.idKey=i,e.rebuildAll(t,!0,!0)):void 0})},r.prototype.createAllNew=function(t,e){var i=this;return null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),_async.each(t.models,function(t){return i.createChild(t,i.gMap)},function(){return i.firstTime=!1})},r.prototype.pieceMeal=function(t,e){var i=this;return null==e&&(e=!0),this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.plurals.length>0?this.figureOutState(this.idKey,t,this.plurals,this.modelKeyComparison,function(t){var e;return e=t,_async.each(e.removals,function(t){var e;return e=i.plurals[t],null!=e?(e.destroy(),i.plurals.remove(t)):void 0},function(){return _async.each(e.adds,function(t){return i.createChild(t,i.gMap)},function(){})})}):this.rebuildAll(this.scope,!0,!0)},r.prototype.createChild=function(t,e){var i,n,r=this;return n=this.scope.$new(!1),this.setChildScope(n,t),n.$watch("model",function(t,e){return t!==e?r.setChildScope(n,t):void 0},!0),n["static"]=this.scope["static"],i=new a(n,this.attrs,e,this.defaults,t),null==t[this.idKey]?void this.$log.error("Polyline model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.plurals.put(t[this.idKey],i),i)},r.prototype.setChildScope=function(t,e){var i=this;return _.each(this.scopePropNames,function(n){var r,o;return r=n+"Key",o="self"===i[r]?e:e[i[r]],o!==t[n]?t[n]=o:void 0}),t.model=e},r.prototype.modelKeyComparison=function(t,e){return _.isEqual(this.evalModelHandle(t,this.scope.path),this.evalModelHandle(e,this.scope.path))},r}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api.models.parent").factory("WindowsParentModel",["IWindowParentModel","ModelsWatcher","PropMap","WindowChildModel","Linked",function(e,n,r,o,s){var a;return a=function(e){function a(e,i,n,o,l,u,c,h,p){var d,g,f=this;this.$interpolate=p,this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.pieceMealWindows=t(this.pieceMealWindows,this),this.createAllNewWindows=t(this.createAllNewWindows,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopesWindows=t(this.createChildScopesWindows,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.watch=t(this.watch,this),this.go=t(this.go,this),a.__super__.constructor.call(this,e,i,n,o,l,u,c,h),g=this,this.windows=new r,this.scopePropNames=["show","coords","templateUrl","templateParameter","isIconVisibleOnClick","closeClick"],_.each(this.scopePropNames,function(t){return f[t+"Key"]=void 0}),this.linked=new s(e,i,n,o),this.models=void 0,this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.$log.info(g),this.parentScope=void 0,d=o[0].getScope(),d.deferred.promise.then(function(t){var i;return f.gMap=t,i=o.length>1&&null!=o[1]?o[1]:void 0,i?i.getScope().deferred.promise.then(function(){return f.markerScope=i.getScope(),f.go(e)}):void f.go(e)})}return i(a,e),a.include(n),a.prototype.go=function(t){var e=this;return this.watchOurScope(t),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,t.$watch("doRebuildAll",function(t,i){return t!==i?e.doRebuildAll=t:void 0}),this.createChildScopesWindows()},a.prototype.watch=function(t,e,i){var n=this;return t.$watch(e,function(t,r){return t!==r?(n[i]="function"==typeof t?t():t,_async.each(_.values(n.windows),function(t){return t.scope[e]="self"===n[i]?t:t[n[i]]},function(){})):void 0})},a.prototype.watchModels=function(t){var e=this;return t.$watch("models",function(i,n){return _.isEqual(i,n)?void 0:e.doRebuildAll||e.doINeedToWipe(i)?e.rebuildAll(t,!0,!0):e.createChildScopesWindows(!1)})},a.prototype.doINeedToWipe=function(t){var e;return e=null!=t?0===t.length:!0,this.windows.length>0&&e},a.prototype.rebuildAll=function(t,e,i){var n=this;return _async.each(this.windows.values(),function(t){return t.destroy()},function(){return i&&delete n.windows,n.windows=new r,e?n.createChildScopesWindows():void 0})},a.prototype.watchDestroy=function(t){var e=this;return t.$on("$destroy",function(){return e.rebuildAll(t,!1,!0)})},a.prototype.watchOurScope=function(t){var e=this;return _.each(this.scopePropNames,function(i){var n;return n=i+"Key",e[n]="function"==typeof t[i]?t[i]():t[i],e.watch(t,i,n)})},a.prototype.createChildScopesWindows=function(t){var e,i;return null==t&&(t=!0),this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),e=this.markerScope,i=angular.isUndefined(this.linked.scope.models),!i||void 0!==e&&void 0!==e.markerModels&&void 0!==e.models?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),t?this.createAllNewWindows(this.linked.scope,!1):this.pieceMealWindows(this.linked.scope,!1)):(this.parentScope=e,this.watchIdKey(this.parentScope),t?this.createAllNewWindows(e,!0,"markerModels",!1):this.pieceMealWindows(e,!0,"markerModels",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derrived from markers!")},a.prototype.watchIdKey=function(t){var e=this;return this.setIdKey(t),t.$watch("idKey",function(i,n){return i!==n&&null==i?(e.idKey=i,e.rebuildAll(t,!0,!0)):void 0
})},a.prototype.createAllNewWindows=function(t,e,i,n){var r=this;return null==i&&(i="models"),null==n&&(n=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.setContentKeys(t.models),_async.each(t.models,function(n){var o;return o=e?t[i][[n[r.idKey]]].gMarker:void 0,r.createWindow(n,o,r.gMap)},function(){return r.firstTime=!1})},a.prototype.pieceMealWindows=function(t,e,i,n){var r=this;return null==i&&(i="models"),null==n&&(n=!0),this.models=t.models,null!=t&&null!=t.models&&t.models.length>0&&this.windows.length>0?this.figureOutState(this.idKey,t,this.windows,this.modelKeyComparison,function(e){var n;return n=e,_async.each(n.removals,function(t){return null!=t?(null!=t.destroy&&t.destroy(),r.windows.remove(t.id)):void 0},function(){return _async.each(n.adds,function(e){var n;return n=t[i][e[r.idKey]].gMarker,r.createWindow(e,n,r.gMap)},function(){})})}):this.rebuildAll(this.scope,!0,!0)},a.prototype.setContentKeys=function(t){return t.length>0?this.contentKeys=Object.keys(t[0]):void 0},a.prototype.createWindow=function(t,e,i){var n,r,s,a,l=this;return r=this.linked.scope.$new(!1),this.setChildScope(r,t),r.$watch("model",function(t,e){return t!==e&&(l.setChildScope(r,t),l.markerScope)?l.windows[t[l.idKey]].markerCtrl=l.markerScope.markerModels[t[l.idKey]].gMarker:void 0},!0),s={html:function(){return l.interpolateContent(l.linked.element.html(),t)}},a=this.createWindowOptions(e,r,s.html(),this.DEFAULTS),n=new o(t,r,a,this.isIconVisibleOnClick,i,e,s,!1,!0),null==t[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.windows.put(t[this.idKey],n),n)},a.prototype.setChildScope=function(t,e){var i=this;return _.each(this.scopePropNames,function(n){var r,o;return r=n+"Key",o="self"===i[r]?e:e[i[r]],o!==t[n]?t[n]=o:void 0}),t.model=e},a.prototype.interpolateContent=function(t,e){var i,n,r,o,s,a;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(i=this.$interpolate(t),n={},a=this.contentKeys,o=0,s=a.length;s>o;o++)r=a[o],n[r]=e[r];return i(n)}},a}(e)}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};angular.module("google-maps.directives.api").factory("Control",["IControl","$http","$templateCache","$compile","$controller",function(t,i,n,r,o){var s;return s=function(s){function a(){var t;a.__super__.constructor.call(this),t=this}return e(a,s),a.prototype.link=function(e,s,a,l){var u,c,h=this;return angular.isUndefined(e.template)?void this.$log.error("mapControl: could not find a valid template property"):(u=angular.isDefined(e.index&&!isNaN(parseInt(e.index)))?parseInt(e.index):void 0,c=angular.isDefined(e.position)?e.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",google.maps.ControlPosition[c]?t.mapPromise(e,l).then(function(t){var s,a;return s=void 0,a=angular.element("<div></div>"),i.get(e.template,{cache:n}).success(function(t){var i,n;return n=e.$new(),a.append(t),u&&(a[0].index=u),angular.isDefined(e.controller)&&(i=o(e.controller,{$scope:n}),a.children().data("$ngControllerController",i)),s=r(a.contents())(n)}).error(function(){return h.$log.error("mapControl: template could not be found")}).then(function(){return t.controls[google.maps.ControlPosition[c]].push(s[0])})}):void this.$log.error("mapControl: invalid position property"))},a}(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("FreeDrawPolygons",["Logger","BaseObject","CtrlHandle","DrawFreeHandChildModel",function(e,n,r,o){var s,a;return s=function(n){function s(){return this.link=t(this.link,this),a=s.__super__.constructor.apply(this,arguments)}return i(s,n),s.include(r),s.prototype.restrict="EA",s.prototype.replace=!0,s.prototype.require="^googleMap",s.prototype.scope={polygons:"=",draw:"="},s.prototype.link=function(t,i,n,r){return this.mapPromise(t,r).then(function(i){var n,r;return t.polygons?_.isArray(t.polygons)?(n=new o(i,t.originalMapOpts),r=void 0,t.draw=function(){return"function"==typeof r&&r(),n.engage(t.polygons).then(function(){var e;return e=!0,r=t.$watch("polygons",function(t,i){var n;return e?void(e=!1):(n=_.differenceObjects(i,t),n.forEach(function(t){return t.setMap(null)}))})})}):e.error("Free Draw Polygons must be of type Array!"):e.error("No polygons to bind to!")})},s}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("IControl",["BaseObject","Logger","CtrlHandle",function(e,n,r){var o;return o=function(e){function o(){this.link=t(this.link,this),this.restrict="EA",this.replace=!0,this.require="^googleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=n}return i(o,e),o.extend(r),o.prototype.link=function(){throw new Exception("Not implemented!!")},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("ILabel",["BaseObject","Logger",function(e,n){var r;return r=function(e){function r(e){this.link=t(this.link,this);var i;i=this,this.restrict="EMA",this.replace=!0,this.template=void 0,this.require=void 0,this.transclude=!0,this.priority=-100,this.scope={labelContent:"=content",labelAnchor:"@anchor",labelClass:"@class",labelStyle:"=style"},this.$log=n,this.$timeout=e}return i(r,e),r.prototype.link=function(){throw new Exception("Not Implemented!!")},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("IMarker",["Logger","BaseObject","CtrlHandle",function(e,n,r){var o;return o=function(n){function o(){this.link=t(this.link,this),this.$log=e,this.restrict="EMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"}}return i(o,n),o.extend(r),o.prototype.link=function(t,e,i,n){if(!n)throw new Error("No Map Control! Marker Directive Must be inside the map!")},o}(n)}])}.call(this),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};angular.module("google-maps.directives.api").factory("IPolyline",["GmapUtil","BaseObject","Logger","CtrlHandle",function(t,i,n,r){var o;return o=function(i){function o(){}return e(o,i),o.include(t),o.extend(r),o.prototype.restrict="EA",o.prototype.replace=!0,o.prototype.require="^googleMap",o.prototype.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"=",events:"="},o.prototype.DEFAULTS={},o.prototype.$log=n,o}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("IWindow",["BaseObject","ChildEvents","Logger",function(e,n,r){var o;return o=function(e){function o(e,i,n,o){this.$timeout=e,this.$compile=i,this.$http=n,this.$templateCache=o,this.link=t(this.link,this),this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require=void 0,this.replace=!0,this.scope={coords:"=coords",show:"=show",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control"},this.$log=r}return i(o,e),o.include(n),o.prototype.link=function(){throw new Exception("Not Implemented!!")},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Map",["$timeout","$q","Logger","GmapUtil","BaseObject","ExtendGWin","CtrlHandle","IsReady".ns(),"uuid".ns(),function(e,n,r,o,s,a,l,u,c){"use strict";var h,p,d;return h=r,p={mapTypeId:google.maps.MapTypeId.ROADMAP},d=function(e){function n(){this.link=t(this.link,this);var e,i;e=function(t){var e;return e=l.handle(t),t.ctrlType="Map",t.deferred.promise.then(function(){return a.init()}),_.extend(e,{getMap:function(){return t.map}})},this.controller=["$scope",e],i=this}return i(n,e),n.include(o),n.prototype.restrict="EMA",n.prototype.transclude=!0,n.prototype.replace=!1,n.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',n.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",windows:"=",options:"=",events:"=",styles:"=",bounds:"="},n.prototype.link=function(t,e,i){var n,r,o,s,a,l,d,g,f,v,m,y=this;if(f=u.spawn(),d=function(){return f.deferred.resolve({instance:f.instance,map:m})},!this.validateCoords(t.center))return void h.error("angular-google-maps: could not find a valid center property");if(!angular.isDefined(t.zoom))return void h.error("angular-google-maps: map zoom property not set");if(r=angular.element(e),r.addClass("angular-google-map"),l={options:{}},i.options&&(l.options=t.options),i.styles&&(l.styles=t.styles),i.type&&(v=i.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(v)?l.mapTypeId=google.maps.MapTypeId[i.type.toUpperCase()]:h.error('angular-google-maps: invalid map type "'+i.type+'"')),a=angular.extend({},p,l,{center:this.getCoords(t.center),draggable:this.isTrue(i.draggable),zoom:t.zoom,bounds:t.bounds}),m=new google.maps.Map(r.find("div")[1],a),m.nggmap_id=c.generate(),n=!1,m?(t.deferred.resolve(m),d()):google.maps.event.addListener(m,"tilesloaded ",function(e){return t.deferred.resolve(e),d()}),google.maps.event.addListener(m,"dragstart",function(){return n=!0,_.defer(function(){return t.$apply(function(t){return null!=t.dragging?t.dragging=n:void 0})})}),google.maps.event.addListener(m,"dragend",function(){return n=!1,_.defer(function(){return t.$apply(function(t){return null!=t.dragging?t.dragging=n:void 0})})}),google.maps.event.addListener(m,"drag",function(){var e;return e=m.center,_.defer(function(){return t.$apply(function(t){return angular.isDefined(t.center.type)?(t.center.coordinates[1]=e.lat(),t.center.coordinates[0]=e.lng()):(t.center.latitude=e.lat(),t.center.longitude=e.lng())})})}),google.maps.event.addListener(m,"zoom_changed",function(){return t.zoom!==m.zoom?_.defer(function(){return t.$apply(function(t){return t.zoom=m.zoom})}):void 0}),g=!1,google.maps.event.addListener(m,"center_changed",function(){var e;return e=m.center,g?void 0:_.defer(function(){return t.$apply(function(t){if(!m.dragging)if(angular.isDefined(t.center.type)){if(t.center.coordinates[1]!==e.lat()&&(t.center.coordinates[1]=e.lat()),t.center.coordinates[0]!==e.lng())return t.center.coordinates[0]=e.lng()}else if(t.center.latitude!==e.lat()&&(t.center.latitude=e.lat()),t.center.longitude!==e.lng())return t.center.longitude=e.lng()})})}),google.maps.event.addListener(m,"idle",function(){var e,i,n;return e=m.getBounds(),i=e.getNorthEast(),n=e.getSouthWest(),_.defer(function(){return t.$apply(function(t){return null!==t.bounds&&void 0!==t.bounds&&void 0!==t.bounds?(t.bounds.northeast={latitude:i.lat(),longitude:i.lng()},t.bounds.southwest={latitude:n.lat(),longitude:n.lng()}):void 0})})}),angular.isDefined(t.events)&&null!==t.events&&angular.isObject(t.events)){s=function(e){return function(){return t.events[e].apply(t,[m,e,arguments])}};for(o in t.events)t.events.hasOwnProperty(o)&&angular.isFunction(t.events[o])&&google.maps.event.addListener(m,o,s(o))}return m.getOptions=function(){return a},t.map=m,null!=i.control&&null!=t.control&&(t.control.refresh=function(t){var e;if(null!=m)return google.maps.event.trigger(m,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.latitude:void 0)?(e=y.getCoords(t),y.isTrue(i.pan)?m.panTo(e):m.setCenter(e)):void 0},t.control.getGMap=function(){return m},t.control.getMapOptions=function(){return a}),t.$watch("center",function(e){var r;return r=y.getCoords(e),r.lat()!==m.center.lat()||r.lng()!==m.center.lng()?(g=!0,n||(y.validateCoords(e)||h.error("Invalid center for newValue: "+JSON.stringify(e)),y.isTrue(i.pan)&&t.zoom===m.zoom?m.panTo(r):m.setCenter(r)),g=!1):void 0},!0),t.$watch("zoom",function(t){return t!==m.zoom?_.defer(function(){return m.setZoom(t)}):void 0}),t.$watch("bounds",function(t,e){var i,n,r;if(t!==e)return null==t.northeast.latitude||null==t.northeast.longitude||null==t.southwest.latitude||null==t.southwest.longitude?void h.error("Invalid map bounds for new value: "+JSON.stringify(t)):(n=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),r=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),i=new google.maps.LatLngBounds(r,n),m.fitBounds(i))}),t.$watch("options",function(t,e){return _.isEqual(t,e)||(l.options=t,null==m)?void 0:m.setOptions(l)},!0),t.$watch("styles",function(t,e){return _.isEqual(t,e)||(l.styles=t,null==m)?void 0:m.setOptions(l)},!0)},n}(s)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Marker",["IMarker","MarkerParentModel","MarkerManager",function(e,n,r){var o;return o=function(o){function s(){this.link=t(this.link,this),s.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',this.$log.info(this)}return i(s,o),s.prototype.controller=["$scope","$element",function(t,i){return t.ctrlType="Marker",e.handle(t,i)}],s.prototype.link=function(t,i,o,s){var a,l=this;return t.fit&&(a=!0),e.mapPromise(t,s).then(function(e){return l.gMarkerManager||(l.gMarkerManager=new r(e)),new n(t,i,o,e,l.$timeout,l.gMarkerManager,a),t.deferred.resolve(),null!=t.control?t.control.getGMarkers=l.gMarkerManager.getGMarkers:void 0})},s}.call(this,e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Markers",["IMarker","MarkersParentModel",function(e,n){var r;return r=function(r){function o(e){this.link=t(this.link,this),o.__super__.constructor.call(this,e),this.template='<span class="angular-google-map-markers" ng-transclude></span>',this.scope=_.extend(this.scope||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",doCluster:"=docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",isLabel:"=islabel"}),this.$timeout=e,this.$log.info(this)}return i(o,r),o.prototype.controller=["$scope","$element",function(t,i){return t.ctrlType="Markers",e.handle(t,i)}],o.prototype.link=function(t,i,r,o){var s=this;return e.mapPromise(t,o).then(function(e){var o;return o=new n(t,i,r,e,s.$timeout),t.deferred.resolve(),null!=t.control?(t.control.getGMarkers=function(){var t;return null!=(t=o.gMarkerManager)?t.getGMarkers():void 0},t.control.getChildMarkers=function(){return o.markerModels}):void 0})},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Polyline",["IPolyline","$timeout","array-sync","PolylineChildModel",function(e,n,r,o){var s,a;return s=function(n){function r(){return this.link=t(this.link,this),a=r.__super__.constructor.apply(this,arguments)}return i(r,n),r.prototype.link=function(t,i,n,r){var s=this;return angular.isUndefined(t.path)||null===t.path||!this.validatePath(t.path)?void this.$log.error("polyline: no valid path attribute found"):e.mapPromise(t,r).then(function(e){return new o(t,n,e,s.DEFAULTS)})},r}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Polylines",["IPolyline","$timeout","array-sync","PolylinesParentModel",function(e,n,r,o){var s;return s=function(e){function n(){this.link=t(this.link,this),n.__super__.constructor.call(this),this.scope.idKey="=idkey",this.scope.models="=models",this.$log.info(this)}return i(n,e),n.prototype.link=function(t,e,i,n){var r=this;return angular.isUndefined(t.path)||null===t.path?void this.$log.error("polylines: no valid path attribute found"):t.models?n.getScope().deferred.promise.then(function(n){return new o(t,e,i,n,r.DEFAULTS)}):void this.$log.error("polylines: no models found to create from")},n}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Window",["IWindow","GmapUtil","WindowChildModel",function(e,n,r){var o;return o=function(e){function o(e,i,n,r){this.init=t(this.init,this),this.link=t(this.link,this),o.__super__.constructor.call(this,e,i,n,r),this.require=["^googleMap","^?marker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',this.$log.info(this),this.childWindows=[]}return i(o,e),o.include(n),o.prototype.link=function(t,e,i,n){var r,o=this;return r=n[0].getScope(),r.deferred.promise.then(function(r){var s,a,l;return s=!0,angular.isDefined(i.isiconvisibleonclick)&&(s=t.isIconVisibleOnClick),(a=n.length>1&&null!=n[1]?n[1]:void 0)?(l=a.getScope(),l.deferred.promise.then(function(){return o.init(t,e,s,r,l)})):void o.init(t,e,s,r)})},o.prototype.init=function(t,e,i,n,o){var s,a,l,u,c,h=this;return s=null!=t.options?t.options:{},l=null!=t&&this.validateCoords(t.coords),null!=o&&(a=o.gMarker,o.$watch("coords",function(t,e){return null==o.gMarker||c.markerCtrl||(c.markerCtrl=a,c.handleClick(!0)),h.validateCoords(t)?angular.equals(t,e)?void 0:c.getLatestPosition(h.getCoords(t)):c.hideWindow()},!0)),u=l?this.createWindowOptions(a,t,e.html(),s):s,null!=n&&(c=new r({},t,u,i,n,a,e),this.childWindows.push(c),t.$on("$destroy",function(){return h.childWindows=_.withoutObjects(h.childWindows,[c],function(t,e){return t.scope.$id===e.scope.$id})})),null!=t.control&&(t.control.getGWindows=function(){return h.childWindows.map(function(t){return t.gWin})},t.control.getChildWindows=function(){return h.childWindows}),null!=this.onChildCreation&&null!=c?this.onChildCreation(c):void 0},o}(e)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps.directives.api").factory("Windows",["IWindow","WindowsParentModel",function(e,n){var r;return r=function(e){function r(e,i,n,o,s){this.link=t(this.link,this);var a;r.__super__.constructor.call(this,e,i,n,o),a=this,this.$interpolate=s,this.require=["^googleMap","^?markers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',this.scope.idKey="=idkey",this.scope.doRebuildAll="=dorebuildall",this.scope.models="=models",this.$log.info(this)}return i(r,e),r.prototype.link=function(t,e,i,r){var o;return o=new n(t,e,i,r,this.$timeout,this.$compile,this.$http,this.$templateCache,this.$interpolate),null!=t.control?(t.control.getGWindows=function(){return o.windows.map(function(t){return t.gWin})},t.control.getChildWindows=function(){return o.windows}):void 0},r}(e)}])}.call(this),function(){angular.module("google-maps").directive("googleMap",["Map",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("marker",["$timeout","Marker",function(t,e){return new e(t)}])}.call(this),function(){angular.module("google-maps").directive("markers",["$timeout","Markers",function(t,e){return new e(t)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty,i=function(t,i){function n(){this.constructor=t}for(var r in i)e.call(i,r)&&(t[r]=i[r]);return n.prototype=i.prototype,t.prototype=new n,t.__super__=i.prototype,t};angular.module("google-maps").directive("markerLabel",["$timeout","ILabel","MarkerLabelChildModel","GmapUtil","nggmap-PropertyAction",function(e,n,r,o,s){var a;return new(a=function(e){function n(e){this.init=t(this.init,this),this.link=t(this.link,this);var i;n.__super__.constructor.call(this,e),i=this,this.require="^marker",this.template='<span class="angular-google-maps-marker-label" ng-transclude></span>',this.$log.info(this)}return i(n,e),n.prototype.link=function(t,e,i,n){var r,o=this;return r=n.getScope(),r?r.deferred.promise.then(function(){return o.init(r,t)}):void 0},n.prototype.init=function(t,e){var i,n,o;return o=null,i=function(){return o?void 0:o=new r(t.gMarker,e,t.map)},n=!0,t.$watch("gMarker",function(){var r,a,l,u;return null!=t.gMarker&&(l=new s(function(){return i(),e.labelContent&&null!=o?o.setOption("labelContent",e.labelContent):void 0},n),r=new s(function(){return i(),null!=o?o.setOption("labelAnchor",e.labelAnchor):void 0},n),a=new s(function(){return i(),null!=o?o.setOption("labelClass",e.labelClass):void 0},n),u=new s(function(){return i(),null!=o?o.setOption("labelStyle",e.labelStyle):void 0},n),e.$watch("labelContent",l.sic),e.$watch("labelAnchor",r.sic),e.$watch("labelClass",a.sic),e.$watch("labelStyle",u.sic),n=!1),e.$on("$destroy",function(){return null!=o?o.destroy():void 0})})},n}(n))(e)}])}.call(this),function(){angular.module("google-maps").directive("polygon",["$log","$timeout","array-sync","GmapUtil",function(t,e,i,n){var r,o;return o=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},r={},{restrict:"EA",replace:!0,require:"^googleMap",scope:{path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"="},link:function(e,o,s,a){return angular.isUndefined(e.path)||null===e.path||!n.validatePath(e.path)?void t.error("polygon: no valid path attribute found"):a.getScope().deferred.promise.then(function(t){var o,s,a,l,u,c;if(s=function(i){var n;return n=angular.extend({},r,{map:t,path:i,strokeColor:e.stroke&&e.stroke.color,strokeOpacity:e.stroke&&e.stroke.opacity,strokeWeight:e.stroke&&e.stroke.weight,fillColor:e.fill&&e.fill.color,fillOpacity:e.fill&&e.fill.opacity}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0,"static":!1,fit:!1,zIndex:0},function(t,i){return n[i]=angular.isUndefined(e[i])||null===e[i]?t:e[i]}),n["static"]&&(n.editable=!1),n},u=n.convertPathPoints(e.path),c=new google.maps.Polygon(s(u)),e.fit&&n.extendMapBounds(t,u),!e["static"]&&angular.isDefined(e.editable)&&e.$watch("editable",function(t,e){return t!==e?c.setEditable(t):void 0}),angular.isDefined(e.draggable)&&e.$watch("draggable",function(t,e){return t!==e?c.setDraggable(t):void 0}),angular.isDefined(e.visible)&&e.$watch("visible",function(t,e){return t!==e?c.setVisible(t):void 0}),angular.isDefined(e.geodesic)&&e.$watch("geodesic",function(t,e){return t!==e?c.setOptions(s(c.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.opacity)&&e.$watch("stroke.opacity",function(){return c.setOptions(s(c.getPath()))}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.weight)&&e.$watch("stroke.weight",function(t,e){return t!==e?c.setOptions(s(c.getPath())):void 0}),angular.isDefined(e.stroke)&&angular.isDefined(e.stroke.color)&&e.$watch("stroke.color",function(t,e){return t!==e?c.setOptions(s(c.getPath())):void 0}),angular.isDefined(e.fill)&&angular.isDefined(e.fill.color)&&e.$watch("fill.color",function(t,e){return t!==e?c.setOptions(s(c.getPath())):void 0}),angular.isDefined(e.fill)&&angular.isDefined(e.fill.opacity)&&e.$watch("fill.opacity",function(t,e){return t!==e?c.setOptions(s(c.getPath())):void 0}),angular.isDefined(e.zIndex)&&e.$watch("zIndex",function(t,e){return t!==e?c.setOptions(s(c.getPath())):void 0}),angular.isDefined(e.events)&&null!==e.events&&angular.isObject(e.events)){l=function(t){return function(){return e.events[t].apply(e,[c,t,arguments])}};for(a in e.events)e.events.hasOwnProperty(a)&&angular.isFunction(e.events[a])&&c.addListener(a,l(a))}return o=i(c.getPath(),e,"path",function(i){return e.fit?n.extendMapBounds(t,i):void 0}),e.$on("$destroy",function(){return c.setMap(null),o?(o(),o=null):void 0})})}}}])}.call(this),function(){angular.module("google-maps").directive("circle",["$log","$timeout","GmapUtil","EventsHelper",function(t,e,i,n){"use strict";var r;return r={},{restrict:"EA",replace:!0,require:"^googleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"="},link:function(o,s,a,l){return l.getScope().deferred.promise.then(function(s){var a,l;return a=function(){var e;return i.validateCoords(o.center)?(e=angular.extend({},r,{map:s,center:i.getCoords(o.center),radius:o.radius,strokeColor:o.stroke&&o.stroke.color,strokeOpacity:o.stroke&&o.stroke.opacity,strokeWeight:o.stroke&&o.stroke.weight,fillColor:o.fill&&o.fill.color,fillOpacity:o.fill&&o.fill.opacity}),angular.forEach({clickable:!0,draggable:!1,editable:!1,geodesic:!1,visible:!0},function(t,i){return e[i]=angular.isUndefined(o[i])||null===o[i]?t:o[i]}),e):void t.error("circle: no valid center attribute found")},l=new google.maps.Circle(a()),o.$watchCollection("center",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watchCollection("stroke",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watchCollection("fill",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watch("radius",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watch("clickable",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watch("editable",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watch("draggable",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watch("visible",function(t,e){return t!==e?l.setOptions(a()):void 0}),o.$watch("geodesic",function(t,e){return t!==e?l.setOptions(a()):void 0}),n.setEvents(l,o,o),google.maps.event.addListener(l,"radius_changed",function(){return o.radius=l.getRadius(),e(function(){return o.$apply()})}),google.maps.event.addListener(l,"center_changed",function(){return angular.isDefined(o.center.type)?(o.center.coordinates[1]=l.getCenter().lat(),o.center.coordinates[0]=l.getCenter().lng()):(o.center.latitude=l.getCenter().lat(),o.center.longitude=l.getCenter().lng()),e(function(){return o.$apply()})}),o.$on("$destroy",function(){return l.setMap(null)})})}}}])}.call(this),function(){angular.module("google-maps").directive("polyline",["Polyline",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("polylines",["Polylines",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("rectangle",["$log","$timeout",function(t){var e,i,n,r,o;return o=function(t){return angular.isUndefined(t.sw.latitude)||angular.isUndefined(t.sw.longitude)||angular.isUndefined(t.ne.latitude)||angular.isUndefined(t.ne.longitude)?!1:!0},i=function(t){var e;return e=new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude))},n=function(t,e){return t.fitBounds(e)},r=function(t){return angular.isDefined(t)&&null!==t&&t===!0||"1"===t||"y"===t||"true"===t},e={},{restrict:"ECA",require:"^googleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"="},link:function(s,a,l,u){return angular.isUndefined(s.bounds)||null===s.bounds||angular.isUndefined(s.bounds.sw)||null===s.bounds.sw||angular.isUndefined(s.bounds.ne)||null===s.bounds.ne||!o(s.bounds)?void t.error("rectangle: no valid bound attribute found"):u.getScope().deferred.promise.then(function(o){var a,u,c,h;return a=function(t){var i;return i=angular.extend({},e,{map:o,bounds:t,strokeColor:s.stroke&&s.stroke.color,strokeOpacity:s.stroke&&s.stroke.opacity,strokeWeight:s.stroke&&s.stroke.weight,fillColor:s.fill&&s.fill.color,fillOpacity:s.fill&&s.fill.opacity}),angular.forEach({clickable:!0,draggable:!1,editable:!1,visible:!0},function(t,e){return i[e]=angular.isUndefined(s[e])||null===s[e]?t:s[e]}),i},c=new google.maps.Rectangle(a(i(s.bounds))),r(l.fit)&&n(o,bounds),u=!1,google.maps.event.addListener(c,"mousedown",function(){google.maps.event.addListener(c,"mousemove",function(){return u=!0,_.defer(function(){return s.$apply(function(t){return null!=t.dragging?t.dragging=u:void 0})})}),google.maps.event.addListener(c,"mouseup",function(){return google.maps.event.clearListeners(c,"mousemove"),google.maps.event.clearListeners(c,"mouseup"),u=!1,_.defer(function(){return s.$apply(function(t){return null!=t.dragging?t.dragging=u:void 0})})})}),h=!1,google.maps.event.addListener(c,"bounds_changed",function(){var t,e,i;return t=c.getBounds(),e=t.getNorthEast(),i=t.getSouthWest(),h?void 0:_.defer(function(){return s.$apply(function(t){c.dragging||null!==t.bounds&&void 0!==t.bounds&&void 0!==t.bounds&&(t.bounds.ne={latitude:e.lat(),longitude:e.lng()},t.bounds.sw={latitude:i.lat(),longitude:i.lng()})})})}),s.$watch("bounds",function(e,i){var n;if(!_.isEqual(e,i))return h=!0,u||((null==e.sw.latitude||null==e.sw.longitude||null==e.ne.latitude||null==e.ne.longitude)&&t.error("Invalid bounds for newValue: "+JSON.stringify(e)),n=new google.maps.LatLngBounds(new google.maps.LatLng(e.sw.latitude,e.sw.longitude),new google.maps.LatLng(e.ne.latitude,e.ne.longitude)),c.setBounds(n)),h=!1},!0),angular.isDefined(s.editable)&&s.$watch("editable",function(t){return c.setEditable(t)}),angular.isDefined(s.draggable)&&s.$watch("draggable",function(t){return c.setDraggable(t)}),angular.isDefined(s.visible)&&s.$watch("visible",function(t){return c.setVisible(t)}),angular.isDefined(s.stroke)&&(angular.isDefined(s.stroke.color)&&s.$watch("stroke.color",function(){return c.setOptions(a(c.getBounds()))}),angular.isDefined(s.stroke.weight)&&s.$watch("stroke.weight",function(){return c.setOptions(a(c.getBounds()))
}),angular.isDefined(s.stroke.opacity)&&s.$watch("stroke.opacity",function(){return c.setOptions(a(c.getBounds()))})),angular.isDefined(s.fill)&&(angular.isDefined(s.fill.color)&&s.$watch("fill.color",function(){return c.setOptions(a(c.getBounds()))}),angular.isDefined(s.fill.opacity)&&s.$watch("fill.opacity",function(){return c.setOptions(a(c.getBounds()))})),s.$on("$destroy",function(){return c.setMap(null)})})}}}])}.call(this),function(){angular.module("google-maps").directive("window",["$timeout","$compile","$http","$templateCache","Window",function(t,e,i,n,r){return new r(t,e,i,n)}])}.call(this),function(){angular.module("google-maps").directive("windows",["$timeout","$compile","$http","$templateCache","$interpolate","Windows",function(t,e,i,n,r,o){return new o(t,e,i,n,r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};angular.module("google-maps").directive("layer",["$timeout","Logger","LayerParentModel",function(e,i,n){var r;return new(r=function(){function e(){this.link=t(this.link,this),this.$log=i,this.restrict="EMA",this.require="^googleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return e.prototype.link=function(t,e,i,r){return r.getScope().deferred.promise.then(function(r){return null!=t.onCreated?new n(t,e,i,r,t.onCreated):new n(t,e,i,r)})},e}())}])}.call(this),function(){angular.module("google-maps").directive("mapControl",["Control",function(t){return new t}])}.call(this),function(){angular.module("google-maps").directive("FreeDrawPolygons".ns(),["FreeDrawPolygons",function(t){return new t}])}.call(this),angular.module("google-maps.wrapped").service("uuid".ns(),function(){function t(){}return t.generate=function(){var e=t._gri,i=t._ha;return i(e(32),8)+"-"+i(e(16),4)+"-"+i(16384|e(12),4)+"-"+i(32768|e(14),4)+"-"+i(e(48),12)},t._gri=function(t){return 0>t?0/0:30>=t?0|Math.random()*(1<<t):53>=t?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<t-30)):0/0},t._ha=function(t,e){for(var i=t.toString(16),n=e-i.length,r="0";n>0;n>>>=1,r+=r)1&n&&(i=r+i);return i},t}),function(){var t={}.hasOwnProperty,e=function(e,i){function n(){this.constructor=e}for(var r in i)t.call(i,r)&&(e[r]=i[r]);return n.prototype=i.prototype,e.prototype=new n,e.__super__=i.prototype,e};window.NgMapCluster=function(t){function i(t){i.__super__.constructor.call(this,t),this.markers_=new window.PropMap}return e(i,t),i.prototype.addMarker=function(t){var e,i;if(this.isMarkerAlreadyAdded_(t)){var n=this.markers_.get(t.key);if(n.getPosition().lat()==t.getPosition().lat()&&n.getPosition().lon()==t.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var r=this.markers_.length+1,o=(this.center_.lat()*(r-1)+t.getPosition().lat())/r,s=(this.center_.lng()*(r-1)+t.getPosition().lng())/r;this.center_=new google.maps.LatLng(o,s),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();return t.isAdded=!0,this.markers_.push(t),e=this.markers_.length,i=this.markerClusterer_.getMaxZoom(),null!==i&&this.map_.getZoom()>i?t.getMap()!==this.map_&&t.setMap(this.map_):e<this.minClusterSize_?t.getMap()!==this.map_&&t.setMap(this.map_):e===this.minClusterSize_?this.markers_.values().forEach(function(t){t.setMap(null)}):t.setMap(null),!0},i.prototype.isMarkerAlreadyAdded_=function(t){return _.isNullOrUndefined(this.markers_.get(t.key))},i.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),i=this.getMarkers().values();for(t=0;t<i.length;t++)e.extend(i[t].getPosition());return e},i.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new PropMap,delete this.markers_},i}(Cluster),window.NgMapMarkerClusterer=function(t){function i(t,e,n){i.__super__.constructor.call(this,t,e,n),this.markers_=new window.PropMap}return e(i,t),i.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new PropMap},i.prototype.removeMarker_=function(t){return this.markers_.get(t.key)?(t.setMap(null),this.markers_.remove(t.key),!0):!1},i.prototype.createClusters_=function(t){var e,i,n,r=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),n=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var o=this.getExtendedBounds(n),s=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;s>e;e++)i=this.markers_.values()[e],!i.isAdded&&this.isMarkerInBounds_(i,o)&&(!this.ignoreHidden_||this.ignoreHidden_&&i.getVisible())&&this.addToClosestCluster_(i);if(s<this.markers_.length)this.timerRefStatic=setTimeout(function(){r.createClusters_(s)},0);else{for(e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},i.prototype.addToClosestCluster_=function(t){var e,i,n,r,o=4e4,s=null;for(e=0;e<this.clusters_.length;e++)n=this.clusters_[e],r=n.getCenter(),r&&(i=this.distanceBetweenPoints_(r,t.getPosition()),o>i&&(o=i,s=n));s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):(n=new NgMapCluster(this),n.addMarker(t),this.clusters_.push(n))},i.prototype.redraw_=function(){this.createClusters_(0)},i.prototype.resetViewport_=function(t){var e;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[],this.markers_.values().forEach(function(e){e.isAdded=!1,t&&e.setMap(null)})},MarkerClusterer.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)"constructor"!==e&&(this.prototype[e]=t.prototype[e]);return this}.apply(t,[e])},i}(MarkerClusterer)}.call(this);